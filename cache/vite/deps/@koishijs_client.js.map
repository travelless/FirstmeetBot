{
  "version": 3,
  "sources": ["../../../node_modules/@koishijs/client/client/data.ts", "../../../node_modules/marked-vue/src/index.ts", "../../../node_modules/@koishijs/client/client/components/common/index.ts", "../../../node_modules/@koishijs/client/client/components/index.ts", "../../../node_modules/@koishijs/client/client/components/icons/index.ts", "../../../node_modules/@koishijs/client/client/components/layout/index.ts", "../../../node_modules/cordis/src/context.ts", "../../../node_modules/cordis/src/events.ts", "../../../node_modules/cordis/src/registry.ts", "../../../node_modules/cordis/src/scope.ts", "../../../node_modules/cordis/src/utils.ts", "../../../node_modules/cordis/src/service.ts", "../../../node_modules/@koishijs/client/client/activity.ts", "../../../node_modules/@koishijs/client/client/config.ts", "../../../node_modules/@koishijs/client/client/loader.ts", "../../../node_modules/@koishijs/client/client/context.ts", "../../../node_modules/@koishijs/client/client/components/link.ts", "../../../node_modules/@koishijs/client/client/components/slot.ts", "../../../node_modules/@koishijs/client/client/index.ts", "../../../node_modules/@koishijs/client/client/utils.ts"],
  "sourcesContent": ["import { AbstractWebSocket, ClientConfig, Console, DataService, Events } from '@koishijs/plugin-console'\nimport { Promisify } from 'koishi'\nimport { markRaw, reactive, ref } from 'vue'\n\nexport type Store = {\n  [K in keyof Console.Services]?: Console.Services[K] extends DataService<infer T> ? T : never\n}\n\ndeclare const KOISHI_CONFIG: ClientConfig\nexport const global = KOISHI_CONFIG\nexport const store = reactive<Store>({})\n\nexport const socket = ref<AbstractWebSocket>(null)\nconst listeners: Record<string, (data: any) => void> = {}\nconst responseHooks: Record<string, [Function, Function]> = {}\n\nexport function send<T extends keyof Events>(type: T, ...args: Parameters<Events[T]>): Promisify<ReturnType<Events[T]>>\nexport function send(type: string, ...args: any[]) {\n  if (!socket.value) return\n  console.debug('↑%c', 'color:brown', type, args)\n  const id = Math.random().toString(36).slice(2, 9)\n  socket.value.send(JSON.stringify({ id, type, args }))\n  return new Promise((resolve, reject) => {\n    responseHooks[id] = [resolve, reject]\n    setTimeout(() => {\n      delete responseHooks[id]\n      reject(new Error('timeout'))\n    }, 60000)\n  })\n}\n\nexport function receive<T = any>(event: string, listener: (data: T) => void) {\n  listeners[event] = listener\n}\n\nreceive('data', ({ key, value }) => {\n  store[key] = value\n})\n\nreceive('patch', ({ key, value }) => {\n  if (Array.isArray(store[key])) {\n    store[key].push(...value)\n  } else if (store[key]) {\n    Object.assign(store[key], value)\n  }\n})\n\nreceive('response', ({ id, value, error }) => {\n  if (!responseHooks[id]) return\n  const [resolve, reject] = responseHooks[id]\n  delete responseHooks[id]\n  if (error) {\n    reject(error)\n  } else {\n    resolve(value)\n  }\n})\n\nexport function connect(callback: () => AbstractWebSocket) {\n  const value = callback()\n\n  let sendTimer: number\n  let closeTimer: number\n  const refresh = () => {\n    if (!global.heartbeat) return\n    clearTimeout(sendTimer)\n    clearTimeout(closeTimer)\n    sendTimer = +setTimeout(() => send('ping'), global.heartbeat.interval)\n    closeTimer = +setTimeout(() => value?.close(), global.heartbeat.timeout)\n  }\n\n  const reconnect = () => {\n    socket.value = null\n    for (const key in store) {\n      store[key] = undefined\n    }\n    console.log('[koishi] websocket disconnected, will retry in 1s...')\n    setTimeout(() => {\n      connect(callback).then(location.reload, () => {\n        console.log('[koishi] websocket disconnected, will retry in 1s...')\n      })\n    }, 1000)\n  }\n\n  value.addEventListener('message', (ev) => {\n    refresh()\n    const data = JSON.parse(ev.data)\n    console.debug('↓%c', 'color:purple', data.type, data.body)\n    if (data.type in listeners) {\n      listeners[data.type](data.body)\n    }\n  })\n\n  value.addEventListener('close', reconnect)\n\n  return new Promise<AbstractWebSocket.Event>((resolve, reject) => {\n    value.addEventListener('open', (event) => {\n      socket.value = markRaw(value)\n      resolve(event)\n    })\n    value.addEventListener('error', reject)\n  })\n}\n", "import { defineComponent, h } from 'vue'\nimport { marked } from 'marked'\nimport * as xss from 'xss'\n\n// Sections derived from MDN element categories and limited to the more\n// benign categories.\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element\nconst allowedTags = [\n  // Content sectioning\n  'address', 'article', 'aside', 'footer', 'header',\n  'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hgroup',\n  'main', 'nav', 'section',\n  // Text content\n  'blockquote', 'dd', 'div', 'dl', 'dt', 'figcaption', 'figure',\n  'hr', 'li', 'main', 'ol', 'p', 'pre', 'ul',\n  // Inline text semantics\n  'a', 'abbr', 'b', 'bdi', 'bdo', 'br', 'cite', 'code', 'data', 'dfn',\n  'em', 'i', 'kbd', 'mark', 'q',\n  'rb', 'rp', 'rt', 'rtc', 'ruby',\n  's', 'samp', 'small', 'span', 'strong', 'sub', 'sup', 'time', 'u', 'var', 'wbr',\n  // Table content\n  'caption', 'col', 'colgroup', 'table', 'tbody', 'td', 'tfoot', 'th',\n  'thead', 'tr',\n]\n\nconst voidTags = ['img', 'br', 'hr', 'area', 'base', 'basefont', 'input', 'link', 'meta']\n\nconst allowedProtocols = ['http:', 'https:', 'mailto:', 'tel:']\n\nfunction checkUrl(value: string) {\n  try {\n    const url = new URL(value, location.toString())\n    return allowedProtocols.includes(url.protocol)\n  } catch (e) {\n    return false\n  }\n}\n\nexport function sanitize(html: string) {\n  const whiteList: XSS.IWhiteList = {\n    ...Object.fromEntries(allowedTags.map(tag => [tag, []])),\n  }\n  const stack: string[] = []\n  html = xss.filterXSS(html, {\n    whiteList,\n    stripIgnoreTag: true,\n    onTag(tag, raw, options) {\n      let html: string | undefined\n      if (tag === 'a' && !options.isClosing) {\n        const attrs: any = {}\n        xss.parseAttr(raw.slice(3), (name, value) => {\n          if (name === 'href') {\n            attrs[name] = checkUrl(value) ? value : '#'\n          } else if (name === 'title') {\n            attrs[name] = xss.escapeAttrValue(value)\n          }\n          return ''\n        })\n        attrs.rel = 'noopener noreferrer'\n        attrs.target = '_blank'\n        html = `<a ${Object.entries(attrs).map(([name, value]) => `${name}=\"${value}\"`).join(' ')}>`\n      }\n      if (raw.endsWith('/>') || voidTags.includes(tag)) return\n      if (!options.isClosing) {\n        stack.push(tag)\n        return html\n      }\n      let result = ''\n      while (stack.length) {\n        const last = stack.pop()\n        if (last === tag) {\n          return result + raw\n        }\n        result += `</${last}>`\n      }\n      return raw.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n    },\n  })\n  while (stack.length) {\n    const last = stack.pop()\n    html += `</${last}>`\n  }\n  return html\n}\n\nexport default defineComponent({\n  props: {\n    source: String,\n    inline: Boolean,\n    tag: String,\n    unsafe: Boolean,\n  },\n  setup(props) {\n    return () => {\n      let html = props.inline\n        ? marked.parseInline(props.source || '')\n        : marked.parse(props.source || '')\n      if (!props.unsafe) html = sanitize(html)\n      const tag = props.tag || (props.inline ? 'span' : 'div')\n      return h(tag, {\n        class: 'markdown',\n        innerHTML: html,\n      })\n    }\n  },\n})\n", "import { App } from 'vue'\nimport Button from './k-button.vue'\nimport Hint from './k-hint.vue'\nimport Tab from './k-tab.vue'\n\nexport default function (app: App) {\n  app.component('k-button', Button)\n  app.component('k-hint', Hint)\n  app.component('k-tab', Tab)\n}\n", "import { App } from 'vue'\nimport Markdown from 'marked-vue'\nimport components, { SchemaBase } from '@koishijs/components'\nimport Element, { ElLoading, ElMessage, ElMessageBox } from 'element-plus'\n\nimport common from './common'\nimport Dynamic from './dynamic.vue'\nimport ChatImage from './chat/image.vue'\nimport * as icons from './icons'\nimport layout from './layout'\nimport link from './link'\nimport slot from './slot'\n\nimport 'element-plus/dist/index.css'\n\nexport const loading = ElLoading.service\nexport const message = ElMessage\nexport const messageBox = ElMessageBox\n\nexport * from './common'\nexport * from './layout'\nexport * from './link'\nexport * from './slot'\n\nexport * from 'vue-i18n'\nexport * from '@koishijs/components'\n\nexport { icons, ChatImage }\n\nSchemaBase.extensions.add({\n  type: 'any',\n  role: 'dynamic',\n  component: Dynamic,\n})\n\nexport default function (app: App) {\n  app.use(Element)\n  app.component('k-markdown', Markdown)\n\n  app.use(common)\n  app.use(components)\n  app.use(icons)\n  app.use(layout)\n  app.use(link)\n  app.use(slot)\n}\n", "import { App, Component, defineComponent, h, markRaw, reactive } from 'vue'\nimport * as components from '@koishijs/components'\nimport Default from './activity/default.vue'\nimport Ellipsis from './activity/ellipsis.vue'\nimport Home from './activity/home.vue'\nimport Moon from './activity/moon.vue'\nimport Settings from './activity/settings.vue'\nimport Sun from './activity/sun.vue'\nimport BoxOpen from './svg/box-open.vue'\nimport CheckFull from './svg/check-full.vue'\nimport ChevronDown from './svg/chevron-down.vue'\nimport ChevronLeft from './svg/chevron-left.vue'\nimport ChevronRight from './svg/chevron-right.vue'\nimport ChevronUp from './svg/chevron-up.vue'\nimport ClipboardList from './svg/clipboard-list.vue'\nimport Edit from './svg/edit.vue'\nimport ExclamationFull from './svg/exclamation-full.vue'\nimport Expand from './svg/expand.vue'\nimport FileArchive from './svg/file-archive.vue'\nimport Filter from './svg/filter.vue'\nimport GitHub from './svg/github.vue'\nimport GitLab from './svg/gitlab.vue'\nimport InfoFull from './svg/info-full.vue'\nimport Koishi from './svg/koishi.vue'\nimport Link from './svg/link.vue'\nimport PaperPlane from './svg/paper-plane.vue'\nimport QuestionEmpty from './svg/question-empty.vue'\nimport Redo from './svg/redo.vue'\nimport Search from './svg/search.vue'\nimport SearchMinus from './svg/search-minus.vue'\nimport SearchPlus from './svg/search-plus.vue'\nimport StarEmpty from './svg/star-empty.vue'\nimport StarFull from './svg/star-full.vue'\nimport Start from './svg/start.vue'\nimport Tag from './svg/tag.vue'\nimport TimesFull from './svg/times-full.vue'\nimport Tools from './svg/tools.vue'\nimport Undo from './svg/undo.vue'\nimport User from './svg/user.vue'\n\nimport './style.scss'\n\nconst registry: Record<string, Component> = reactive({})\n\nregister('activity:default', Default)\nregister('activity:ellipsis', Ellipsis)\nregister('activity:home', Home)\nregister('activity:moon', Moon)\nregister('activity:settings', Settings)\nregister('activity:sun', Sun)\n\nregister('arrow-up', components.IconArrowUp)\nregister('arrow-down', components.IconArrowDown)\nregister('box-open', BoxOpen)\nregister('check-full', CheckFull)\nregister('chevron-down', ChevronDown)\nregister('chevron-left', ChevronLeft)\nregister('chevron-right', ChevronRight)\nregister('chevron-up', ChevronUp)\nregister('clipboard-list', ClipboardList)\nregister('close', components.IconClose)\nregister('delete', components.IconDelete)\nregister('edit', Edit)\nregister('exclamation-full', ExclamationFull)\nregister('expand', Expand)\nregister('external', components.IconExternal)\nregister('eye-slash', components.IconEyeSlash)\nregister('eye', components.IconEye)\nregister('file-archive', FileArchive)\nregister('filter', Filter)\nregister('github', GitHub)\nregister('gitlab', GitLab)\nregister('info-full', InfoFull)\nregister('koishi', Koishi)\nregister('link', Link)\nregister('paper-plane', PaperPlane)\nregister('question-empty', QuestionEmpty)\nregister('redo', Redo)\nregister('search', Search)\nregister('search-minus', SearchMinus)\nregister('search-plus', SearchPlus)\nregister('star-empty', StarEmpty)\nregister('star-full', StarFull)\nregister('start', Start)\nregister('tag', Tag)\nregister('times-full', TimesFull)\nregister('tools', Tools)\nregister('undo', Undo)\nregister('user', User)\n\nexport function register(name: string, component: Component) {\n  registry[name] = markRaw(component)\n}\n\nexport function install(app: App) {\n  app.component('k-icon', defineComponent({\n    props: {\n      name: String,\n    },\n    render(props) {\n      const component = registry[props.name]\n      return component && h(component)\n    },\n  }))\n}\n", "import { App } from 'vue'\nimport CardNumeric from './card-numeric.vue'\nimport Card from './card.vue'\nimport Content from './content.vue'\nimport Empty from './empty.vue'\nimport TabGroup from './tab-group.vue'\nimport TabItem from './tab-item.vue'\n\nexport default function (app: App) {\n  app.component('k-numeric', CardNumeric)\n  app.component('k-card', Card)\n  app.component('k-content', Content)\n  app.component('k-empty', Empty)\n  app.component('k-tab-group', TabGroup)\n  app.component('k-tab-item', TabItem)\n}\n", "import { defineProperty } from 'cosmokit'\nimport { Lifecycle } from './events'\nimport { Registry } from './registry'\nimport { getConstructor, isConstructor, resolveConfig } from './utils'\n\nexport interface Context<T = any> {\n  [Context.config]: Context.Config\n  root: Context.Configured<this, this[typeof Context.config]>\n  mapping: Record<string | symbol, symbol>\n  lifecycle: Lifecycle\n  registry: Registry<this>\n  config: T\n}\n\nexport class Context {\n  static readonly config = Symbol('config')\n  static readonly events = Symbol('events')\n  static readonly static = Symbol('static')\n  static readonly filter = Symbol('filter')\n  static readonly source = Symbol('source')\n  static readonly expose = Symbol('expose')\n  static readonly current = Symbol('current')\n  static readonly internal = Symbol('internal')\n\n  constructor(config?: Context.Config) {\n    const options = resolveConfig(getConstructor(this), config)\n    const attach = (internal: {}) => {\n      if (!internal) return\n      attach(Object.getPrototypeOf(internal))\n      for (const key of Object.getOwnPropertySymbols(internal)) {\n        const constructor = internal[key]\n        const name = constructor[Context.expose]\n        this[key] = new constructor(this, name ? options?.[name] : options)\n      }\n    }\n\n    this.root = this as any\n    this.mapping = Object.create(null)\n    attach(this[Context.internal])\n  }\n\n  [Symbol.for('nodejs.util.inspect.custom')]() {\n    return `Context <${this.runtime.name}>`\n  }\n\n  get events() {\n    return this.lifecycle\n  }\n\n  /** @deprecated */\n  get state() {\n    return this.scope\n  }\n\n  extend(meta = {}): this {\n    return Object.assign(Object.create(this), meta)\n  }\n\n  isolate(names: string[]) {\n    const mapping = Object.create(this.mapping)\n    for (const name of names) {\n      mapping[name] = Symbol(name)\n    }\n    return this.extend({ mapping })\n  }\n}\n\nexport namespace Context {\n  export type Configured<C, T = any> = Omit<C, 'config'> & { config: T }\n\n  export interface Config extends Lifecycle.Config, Registry.Config {}\n\n  export interface MixinOptions {\n    methods?: string[]\n    properties?: string[]\n  }\n\n  export function mixin(name: keyof any, options: MixinOptions) {\n    for (const key of options.methods || []) {\n      const method = defineProperty(function (this: Context, ...args: any[]) {\n        return this[name][key](...args)\n      }, 'name', key)\n      defineProperty(this.prototype, key, method)\n    }\n\n    for (const key of options.properties || []) {\n      Object.defineProperty(this.prototype, key, {\n        configurable: true,\n        get(this: Context) {\n          return this[name][key]\n        },\n        set(this: Context, value: any) {\n          this[name][key] = value\n        },\n      })\n    }\n  }\n\n  export interface ServiceOptions extends MixinOptions {\n    prototype?: any\n  }\n\n  export function service(name: keyof any, options: ServiceOptions = {}) {\n    if (Object.prototype.hasOwnProperty.call(this.prototype, name)) return\n    const privateKey = typeof name === 'symbol' ? name : Symbol(name)\n\n    Object.defineProperty(this.prototype, name, {\n      configurable: true,\n      get(this: Context) {\n        const key = this.mapping[name as any] || privateKey\n        const value = this.root[key]\n        if (!value) return\n        defineProperty(value, Context.current, this)\n        return value\n      },\n      set(this: Context, value) {\n        const key = this.mapping[name] || privateKey\n        const oldValue = this.root[key]\n        if (oldValue === value) return\n\n        // setup filter for events\n        const self = Object.create(null)\n        self[Context.filter] = (ctx: Context) => {\n          return this.mapping[name] === ctx.mapping[name]\n        }\n\n        // check override\n        if (value && oldValue && typeof name === 'string') {\n          throw new Error(`service ${name} has been registered`)\n        }\n\n        if (typeof name === 'string') {\n          this.emit(self, 'internal/before-service', name, value)\n        }\n        this.root[key] = value\n        if (value && typeof value === 'object') {\n          defineProperty(value, Context.source, this)\n        }\n        if (typeof name === 'string') {\n          this.emit(self, 'internal/service', name, oldValue)\n        }\n      },\n    })\n\n    if (isConstructor(options)) {\n      const internal = ensureInternal(this.prototype)\n      internal[privateKey] = options\n    }\n\n    this.mixin(name, options)\n  }\n\n  function ensureInternal(prototype: {}) {\n    if (Object.prototype.hasOwnProperty.call(prototype, Context.internal)) {\n      return prototype[Context.internal]\n    }\n    const parent = ensureInternal(Object.getPrototypeOf(prototype))\n    return prototype[Context.internal] = Object.create(parent)\n  }\n}\n\nContext.prototype[Context.internal] = Object.create(null)\n\nContext.service('registry', Registry)\nContext.service('lifecycle', Lifecycle)\n\nContext.mixin('state', {\n  properties: ['config', 'runtime'],\n  methods: ['collect', 'accept', 'decline'],\n})\n", "import { Awaitable, defineProperty, Promisify, remove } from 'cosmokit'\nimport { Context } from './context'\nimport { EffectScope, ForkScope, MainScope, ScopeStatus } from './scope'\nimport { Plugin } from './registry'\n\nexport function isBailed(value: any) {\n  return value !== null && value !== false && value !== undefined\n}\n\nexport type Parameters<F> = F extends (...args: infer P) => any ? P : never\nexport type ReturnType<F> = F extends (...args: any) => infer R ? R : never\nexport type ThisType<F> = F extends (this: infer T, ...args: any) => any ? T : never\nexport type GetEvents<C extends Context> = C[typeof Context.events]\n\ndeclare module './context' {\n  export interface Context {\n    [Context.events]: Events<this>\n    parallel<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): Promise<void>\n    parallel<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): Promise<void>\n    emit<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): void\n    emit<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): void\n    serial<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): Promisify<ReturnType<GetEvents<this>[K]>>\n    serial<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): Promisify<ReturnType<GetEvents<this>[K]>>\n    bail<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): ReturnType<GetEvents<this>[K]>\n    bail<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): ReturnType<GetEvents<this>[K]>\n    on<K extends keyof GetEvents<this>>(name: K, listener: GetEvents<this>[K], prepend?: boolean): () => boolean\n    once<K extends keyof GetEvents<this>>(name: K, listener: GetEvents<this>[K], prepend?: boolean): () => boolean\n    off<K extends keyof GetEvents<this>>(name: K, listener: GetEvents<this>[K]): boolean\n    start(): Promise<void>\n    stop(): Promise<void>\n  }\n}\n\nexport namespace Lifecycle {\n  export interface Config {\n    maxListeners?: number\n  }\n}\n\nexport class Lifecycle {\n  static readonly methods = ['on', 'once', 'off', 'before', 'after', 'parallel', 'emit', 'serial', 'bail', 'start', 'stop']\n\n  isActive = false\n  _tasks = new Set<Promise<void>>()\n  _hooks: Record<keyof any, [Context, (...args: any[]) => any][]> = {}\n\n  constructor(private root: Context) {\n    defineProperty(this, Context.current, root)\n    defineProperty(this.on('internal/hook', function (name, listener, prepend) {\n      const method = prepend ? 'unshift' : 'push'\n      const { scope } = this[Context.current]\n      const { runtime, disposables } = scope\n      if (name === 'ready' && this.isActive) {\n        scope.ensure(async () => listener())\n      } else if (name === 'dispose') {\n        disposables[method](listener as any)\n        defineProperty(listener, 'name', 'event <dispose>')\n        return () => remove(disposables, listener)\n      } else if (name === 'fork') {\n        runtime.forkables[method](listener as any)\n        return scope.collect('event <fork>', () => remove(runtime.forkables, listener))\n      }\n    }), Context.static, root.scope)\n  }\n\n  /** @deprecated */\n  queue(value: any) {\n    this[Context.current].scope.ensure(async () => value)\n  }\n\n  async flush() {\n    while (this._tasks.size) {\n      await Promise.all(Array.from(this._tasks))\n    }\n  }\n\n  * getHooks(name: keyof any, thisArg?: object) {\n    const hooks = this._hooks[name] || []\n    for (const [context, callback] of hooks.slice()) {\n      const filter = thisArg?.[Context.filter]\n      if (filter && !filter.call(thisArg, context)) continue\n      yield callback\n    }\n  }\n\n  async parallel(...args: any[]) {\n    const thisArg = typeof args[0] === 'object' ? args.shift() : null\n    const name = args.shift()\n    await Promise.all([...this.getHooks(name, thisArg)].map(async (callback) => {\n      await callback.apply(thisArg, args)\n    }))\n  }\n\n  emit(...args: any[]) {\n    const thisArg = typeof args[0] === 'object' ? args.shift() : null\n    const name = args.shift()\n    for (const callback of this.getHooks(name, thisArg)) {\n      callback.apply(thisArg, args)\n    }\n  }\n\n  async serial(...args: any[]) {\n    const thisArg = typeof args[0] === 'object' ? args.shift() : null\n    const name = args.shift()\n    for (const callback of this.getHooks(name, thisArg)) {\n      const result = await callback.apply(thisArg, args)\n      if (isBailed(result)) return result\n    }\n  }\n\n  bail(...args: any[]) {\n    const thisArg = typeof args[0] === 'object' ? args.shift() : null\n    const name = args.shift()\n    for (const callback of this.getHooks(name, thisArg)) {\n      const result = callback.apply(thisArg, args)\n      if (isBailed(result)) return result\n    }\n  }\n\n  register(label: string, hooks: [Context, any][], listener: any, prepend?: boolean) {\n    const maxListeners = this.root.config.maxListeners!\n    if (hooks.length >= maxListeners!) {\n      this.root.emit('internal/warning', `max listener count (${maxListeners!}) for ${label} exceeded, which may be caused by a memory leak`)\n    }\n\n    const caller = this[Context.current]\n    const method = prepend ? 'unshift' : 'push'\n    hooks[method]([caller, listener])\n    return caller.state.collect(label, () => this.unregister(hooks, listener))\n  }\n\n  unregister(hooks: [Context, any][], listener: any) {\n    const index = hooks.findIndex(([context, callback]) => callback === listener)\n    if (index >= 0) {\n      hooks.splice(index, 1)\n      return true\n    }\n  }\n\n  on(name: keyof any, listener: (...args: any) => any, prepend = false) {\n    // handle special events\n    const result = this.bail(this, 'internal/hook', name, listener, prepend)\n    if (result) return result\n\n    const hooks = this._hooks[name] ||= []\n    const label = typeof name === 'string' ? `event <${name}>` : 'event (Symbol)'\n    return this.register(label, hooks, listener, prepend)\n  }\n\n  once(name: keyof any, listener: (...args: any) => any, prepend = false) {\n    const dispose = this.on(name, function (...args: any[]) {\n      dispose()\n      return listener.apply(this, args)\n    }, prepend)\n    return dispose\n  }\n\n  off(name: keyof any, listener: (...args: any) => any) {\n    return this.unregister(this._hooks[name] || [], listener)\n  }\n\n  async start() {\n    this.isActive = true\n    const hooks = this._hooks.ready || []\n    while (hooks.length) {\n      const [context, callback] = hooks.shift()!\n      context.scope.ensure(async () => callback())\n    }\n    await this.flush()\n  }\n\n  async stop() {\n    this.isActive = false\n    // `dispose` event is handled by state.disposables\n    this.root.scope.reset()\n  }\n}\n\nexport interface Events<C extends Context = Context> {\n  'fork': Plugin.Function<C['config'], C>\n  'ready'(): Awaitable<void>\n  'dispose'(): Awaitable<void>\n  'internal/fork'(fork: ForkScope<Context.Configured<C>>): void\n  'internal/runtime'(runtime: MainScope<Context.Configured<C>>): void\n  'internal/status'(scope: EffectScope<Context.Configured<C>>, oldValue: ScopeStatus): void\n  'internal/warning'(format: any, ...param: any[]): void\n  'internal/before-service'(name: string, value: any): void\n  'internal/service'(name: string, oldValue: any): void\n  'internal/before-update'(fork: ForkScope<Context.Configured<C>>, config: any): void\n  'internal/update'(fork: ForkScope<Context.Configured<C>>, oldConfig: any): void\n  'internal/hook'(this: Lifecycle, name: string, listener: Function, prepend: boolean): () => boolean\n}\n", "import { defineProperty } from 'cosmokit'\nimport { Context } from './context'\nimport { ForkScope, MainScope } from './scope'\nimport { resolveConfig } from './utils'\n\nexport function isApplicable(object: Plugin) {\n  return object && typeof object === 'object' && typeof object.apply === 'function'\n}\n\nexport type Plugin<C extends Context = Context> =\n  | Plugin.Function<any, C>\n  | Plugin.Constructor<any, C>\n  | Plugin.Object<any, any, C>\n\nexport namespace Plugin {\n  export type Function<T = any, C extends Context = any> = (ctx: C, options: T) => void\n  export type Constructor<T = any, C extends Context = any> = new (ctx: C, options: T) => void\n\n  export interface Object<S = any, T = any, C extends Context = any> {\n    name?: string\n    apply: Function<T, C>\n    reactive?: boolean\n    reusable?: boolean\n    Config?: (config?: S) => T\n    schema?: (config?: S) => T\n    using?: readonly string[]\n  }\n\n  export type Config<T extends Plugin<any>> =\n    | T extends Constructor<infer U> ? U\n    : T extends Function<infer U> ? U\n    : T extends Object<infer U> ? U\n    : never\n}\n\ndeclare module './context' {\n  export interface Context {\n    using(using: readonly string[], callback: Plugin.Function<void, Context.Configured<this>>): ForkScope<Context.Configured<this>>\n    plugin<S extends Plugin<Context.Configured<this>>, T extends Plugin.Config<S>>(plugin: S, config?: boolean | T): ForkScope<Context.Configured<this, T>>\n    /** @deprecated use `ctx.registry.delete()` instead */\n    dispose(plugin?: Plugin<Context.Configured<this>>): boolean\n  }\n}\n\nexport namespace Registry {\n  export interface Config {}\n}\n\nexport class Registry<C extends Context = Context> extends Map<Plugin<C>, MainScope<C>> {\n  static readonly methods = ['using', 'plugin', 'dispose']\n\n  private _counter = 0\n\n  constructor(private root: Context, config: Registry.Config) {\n    super()\n    defineProperty(this, Context.current, root)\n    root.scope = new MainScope(this, null!, config)\n    root.scope.runtime.isReactive = true\n  }\n\n  get counter() {\n    return ++this._counter\n  }\n\n  resolve(plugin: Plugin) {\n    // Allow `null` as a special case.\n    if (plugin === null) return plugin\n    if (typeof plugin === 'function') return plugin\n    if (isApplicable(plugin)) return plugin.apply\n    throw new Error('invalid plugin, expect function or object with an \"apply\" method')\n  }\n\n  get(plugin: Plugin<C>) {\n    return super.get(this.resolve(plugin))\n  }\n\n  has(plugin: Plugin<C>) {\n    return super.has(this.resolve(plugin))\n  }\n\n  set(plugin: Plugin<C>, state: MainScope<C>) {\n    return super.set(this.resolve(plugin), state)\n  }\n\n  delete(plugin: Plugin<C>) {\n    plugin = this.resolve(plugin)\n    const runtime = this.get(plugin)\n    if (!runtime) return false\n    super.delete(plugin)\n    return runtime.dispose()\n  }\n\n  using(using: readonly string[], callback: Plugin.Function<void, C>) {\n    return this.plugin({ using, apply: callback, name: callback.name })\n  }\n\n  plugin(plugin: Plugin<C>, config?: any) {\n    // check if it's a valid plugin\n    this.resolve(plugin)\n\n    // resolve plugin config\n    config = resolveConfig(plugin, config)\n    if (!config) return\n\n    // check duplication\n    const context = this[Context.current]\n    let runtime = this.get(plugin)\n    if (runtime) {\n      if (!runtime.isForkable) {\n        this.root.emit('internal/warning', `duplicate plugin detected: ${plugin.name}`)\n      }\n      return runtime.fork(context, config)\n    }\n\n    runtime = new MainScope(this, plugin, config)\n    return runtime.fork(context, config)\n  }\n\n  dispose(plugin: Plugin<C>) {\n    return this.delete(plugin)\n  }\n}\n", "import { deepEqual, defineProperty, remove } from 'cosmokit'\nimport { Context } from './context'\nimport { Plugin, Registry } from './registry'\nimport { getConstructor, isConstructor, resolveConfig } from './utils'\n\ndeclare module './context' {\n  export interface Context {\n    scope: EffectScope<this>\n    runtime: MainScope<this>\n    collect(label: string, callback: () => void): () => void\n    accept(callback?: (config: this['config']) => void | boolean, options?: AcceptOptions): () => boolean\n    accept(keys: (keyof this['config'])[], callback?: (config: this['config']) => void | boolean, options?: AcceptOptions): () => boolean\n    decline(keys: (keyof this['config'])[]): () => boolean\n  }\n}\n\nexport type Disposable = () => void\n\nexport interface AcceptOptions {\n  passive?: boolean\n  immediate?: boolean\n}\n\nexport interface Acceptor extends AcceptOptions {\n  keys?: string[]\n  callback?: (config: any) => void | boolean\n}\n\nexport type ScopeStatus = 'pending' | 'loading' | 'active' | 'failed' | 'disposed'\n\nexport abstract class EffectScope<C extends Context = Context> {\n  public uid: number | null\n  public ctx: C\n  public disposables: Disposable[] = []\n  public error: any\n  public status: ScopeStatus = 'pending'\n\n  protected proxy: any\n  protected context: Context\n  protected acceptors: Acceptor[] = []\n  protected tasks = new Set<Promise<void>>()\n  protected hasError = false\n  protected isActive = false\n\n  abstract runtime: MainScope<C>\n  abstract dispose(): boolean\n  abstract update(config: C['config'], forced?: boolean): void\n\n  constructor(public parent: C, public config: C['config']) {\n    this.uid = parent.registry ? parent.registry.counter : 0\n    this.ctx = this.context = parent.extend({ scope: this })\n    this.proxy = new Proxy({}, {\n      get: (target, key) => Reflect.get(this.config, key),\n    })\n  }\n\n  protected get _config() {\n    return this.runtime.isReactive ? this.proxy : this.config\n  }\n\n  collect(label: string, callback: () => any) {\n    const dispose = defineProperty(() => {\n      remove(this.disposables, dispose)\n      return callback()\n    }, 'name', label)\n    this.disposables.push(dispose)\n    return dispose\n  }\n\n  restart() {\n    this.reset()\n    this.start()\n  }\n\n  protected _getStatus() {\n    if (this.uid === null) return 'disposed'\n    if (this.hasError) return 'failed'\n    if (this.tasks.size) return 'loading'\n    if (this.ready) return 'active'\n    return 'pending'\n  }\n\n  protected _updateStatus(callback?: () => void) {\n    const oldValue = this.status\n    callback?.()\n    this.status = this._getStatus()\n    if (oldValue !== this.status) {\n      this.context.emit('internal/status', this, oldValue)\n    }\n  }\n\n  ensure(callback: () => Promise<void>) {\n    const task = callback()\n      .catch((reason) => {\n        this.context.emit('internal/warning', reason)\n        this.cancel(reason)\n      })\n      .finally(() => {\n        this._updateStatus(() => this.tasks.delete(task))\n        this.context.events._tasks.delete(task)\n      })\n    this._updateStatus(() => this.tasks.add(task))\n    this.context.events._tasks.add(task)\n  }\n\n  cancel(reason: any) {\n    this.error = reason\n    this._updateStatus(() => this.hasError = true)\n    this.reset()\n  }\n\n  protected setup() {\n    if (!this.runtime.using.length) return\n    defineProperty(this.context.on('internal/before-service', (name) => {\n      if (!this.runtime.using.includes(name)) return\n      this._updateStatus()\n      this.reset()\n    }), Context.static, this)\n    defineProperty(this.context.on('internal/service', (name) => {\n      if (!this.runtime.using.includes(name)) return\n      this.start()\n    }), Context.static, this)\n  }\n\n  get ready() {\n    return this.runtime.using.every(name => this.ctx[name])\n  }\n\n  reset() {\n    this.isActive = false\n    this.disposables = this.disposables.splice(0).filter((dispose) => {\n      if (this.uid !== null && dispose[Context.static] === this) return true\n      dispose()\n    })\n  }\n\n  start() {\n    if (!this.ready || this.isActive || this.uid === null) return true\n    this.isActive = true\n    this._updateStatus(() => this.hasError = false)\n  }\n\n  accept(callback?: (config: C['config']) => void | boolean, options?: AcceptOptions): () => boolean\n  accept(keys: string[], callback?: (config: C['config']) => void | boolean, options?: AcceptOptions): () => boolean\n  accept(...args: any[]) {\n    const keys = Array.isArray(args[0]) ? args.shift() : null\n    const acceptor: Acceptor = { keys, callback: args[0], ...args[1] }\n    this.acceptors.push(acceptor)\n    if (acceptor.immediate) acceptor.callback?.(this.config)\n    return this.collect(`accept <${keys?.join(', ') || '*'}>`, () => remove(this.acceptors, acceptor))\n  }\n\n  decline(keys: string[]) {\n    return this.accept(keys, () => true)\n  }\n\n  checkUpdate(resolved: any, forced?: boolean) {\n    if (forced) return [true, true]\n    if (forced === false) return [false, false]\n\n    const modified: Record<string, boolean> = Object.create(null)\n    const checkPropertyUpdate = (key: string) => {\n      const result = modified[key] ??= !deepEqual(this.config[key], resolved[key])\n      hasUpdate ||= result\n      return result\n    }\n\n    const ignored = new Set<string>()\n    let hasUpdate = false, shouldRestart = false\n    let fallback: boolean | null = this.runtime.isReactive || null\n    for (const { keys, callback, passive } of this.acceptors) {\n      if (!keys) {\n        fallback ||= !passive\n      } else if (passive) {\n        keys?.forEach(key => ignored.add(key))\n      } else {\n        let hasUpdate = false\n        for (const key of keys) {\n          hasUpdate ||= checkPropertyUpdate(key)\n        }\n        if (!hasUpdate) continue\n      }\n      const result = callback?.(resolved)\n      if (result) shouldRestart = true\n    }\n\n    for (const key in { ...this.config, ...resolved }) {\n      if (fallback === false) continue\n      if (!(key in modified) && !ignored.has(key)) {\n        const hasUpdate = checkPropertyUpdate(key)\n        if (fallback === null) shouldRestart ||= hasUpdate\n      }\n    }\n    return [hasUpdate, shouldRestart]\n  }\n}\n\nexport class ForkScope<C extends Context = Context> extends EffectScope<C> {\n  dispose: () => boolean\n\n  constructor(parent: Context, config: C['config'], public runtime: MainScope<C>) {\n    super(parent as C, config)\n\n    this.dispose = defineProperty(parent.scope.collect(`fork <${parent.runtime.name}>`, () => {\n      this.uid = null\n      this.reset()\n      const result = remove(runtime.disposables, this.dispose)\n      if (remove(runtime.children, this) && !runtime.children.length) {\n        parent.registry.delete(runtime.plugin)\n      }\n      this.context.emit('internal/fork', this)\n      return result\n    }), Context.static, runtime)\n\n    runtime.children.push(this)\n    runtime.disposables.push(this.dispose)\n    this.context.emit('internal/fork', this)\n    if (runtime.isReusable) {\n      // non-reusable plugin forks are not responsive to isolated service changes\n      this.setup()\n    }\n    this.start()\n  }\n\n  start() {\n    if (super.start()) return true\n    for (const fork of this.runtime.forkables) {\n      this.ensure(async () => fork(this.context, this._config))\n    }\n  }\n\n  update(config: any, forced?: boolean) {\n    const oldConfig = this.config\n    const state: EffectScope<C> = this.runtime.isForkable ? this : this.runtime\n    if (state.config !== oldConfig) return\n    const resolved = resolveConfig(this.runtime.plugin, config)\n    const [hasUpdate, shouldRestart] = state.checkUpdate(resolved, forced)\n    this.context.emit('internal/before-update', this, config)\n    this.config = resolved\n    state.config = resolved\n    if (hasUpdate) {\n      this.context.emit('internal/update', this, oldConfig)\n    }\n    if (shouldRestart) state.restart()\n  }\n}\n\nexport class MainScope<C extends Context = Context> extends EffectScope<C> {\n  runtime = this\n  schema: any\n  using: readonly string[] = []\n  forkables: Function[] = []\n  children: ForkScope<C>[] = []\n  isReusable = false\n  isReactive = false\n\n  constructor(registry: Registry<C>, public plugin: Plugin, config: any) {\n    super(registry[Context.current] as C, config)\n    registry.set(plugin, this)\n    if (plugin) {\n      this.setup()\n    } else {\n      this.isActive = true\n    }\n  }\n\n  get isForkable() {\n    return this.forkables.length > 0\n  }\n\n  get name() {\n    if (!this.plugin) return 'root'\n    const { name } = this.plugin\n    return !name || name === 'apply' ? 'anonymous' : name\n  }\n\n  fork(parent: Context, config: any) {\n    return new ForkScope(parent, config, this)\n  }\n\n  dispose() {\n    this.uid = null\n    this.reset()\n    this.context.emit('internal/runtime', this)\n    return true\n  }\n\n  setup() {\n    this.schema = this.plugin['Config'] || this.plugin['schema']\n    this.using = this.plugin['using'] || []\n    this.isReusable = this.plugin['reusable']\n    this.isReactive = this.plugin['reactive']\n    this.context.emit('internal/runtime', this)\n\n    if (this.isReusable) {\n      this.forkables.push(this.apply)\n    } else {\n      super.setup()\n    }\n\n    this.restart()\n  }\n\n  private apply = (context: Context, config: any) => {\n    const plugin = this.plugin\n    if (typeof plugin !== 'function') {\n      this.ensure(async () => plugin.apply(context, config))\n    } else if (isConstructor(plugin)) {\n      // eslint-disable-next-line new-cap\n      const instance = new plugin(context, config)\n      const name = instance[Context.expose]\n      if (name) {\n        context[name] = instance\n      }\n      if (instance['fork']) {\n        this.forkables.push(instance['fork'].bind(instance))\n      }\n    } else {\n      this.ensure(async () => plugin(context, config))\n    }\n  }\n\n  reset() {\n    super.reset()\n    for (const fork of this.children) {\n      fork.reset()\n    }\n  }\n\n  start() {\n    if (super.start()) return true\n    if (!this.isReusable && this.plugin) {\n      this.apply(this.context, this._config)\n    }\n    for (const fork of this.children) {\n      fork.start()\n    }\n  }\n\n  update(config: C['config'], forced?: boolean) {\n    if (this.isForkable) {\n      this.context.emit('internal/warning', `attempting to update forkable plugin \"${this.plugin.name}\", which may lead to unexpected behavior`)\n    }\n    const oldConfig = this.config\n    const resolved = resolveConfig(this.runtime.plugin || getConstructor(this.context), config)\n    const [hasUpdate, shouldRestart] = this.checkUpdate(resolved, forced)\n    const state = this.children.find(fork => fork.config === oldConfig)\n    this.config = resolved\n    if (state) {\n      this.context.emit('internal/before-update', state, config)\n      state.config = resolved\n      if (hasUpdate) {\n        this.context.emit('internal/update', state, oldConfig)\n      }\n    }\n    if (shouldRestart) this.restart()\n  }\n}\n", "export function isConstructor(func: any): func is new (...args: any) => any {\n  // async function or arrow function\n  if (!func.prototype) return false\n  // generator function or malformed definition\n  if (func.prototype.constructor !== func) return false\n  return true\n}\n\nexport function getConstructor(instance: any) {\n  return Object.getPrototypeOf(instance).constructor\n}\n\nexport function resolveConfig(plugin: any, config: any) {\n  if (config === false) return\n  if (config === true) config = undefined\n\n  const schema = plugin['Config'] || plugin['schema']\n  if (schema && plugin['schema'] !== false) config = schema(config)\n  return config ?? {}\n}\n", "import { Awaitable, defineProperty } from 'cosmokit'\nimport { Context } from './context'\nimport { getConstructor } from './utils'\n\nexport class Service<C extends Context = Context> {\n  protected start(): Awaitable<void> {}\n  protected stop(): Awaitable<void> {}\n  protected fork?(ctx: C, config: any): void\n\n  constructor(protected ctx: C, name: string, immediate?: boolean) {\n    getConstructor(ctx.root).service(name)\n    defineProperty(this, Context.current, ctx)\n\n    if (immediate) {\n      this[Context.expose] = name\n    }\n\n    ctx.on('ready', async () => {\n      // await until next tick because derived class has not been initialized yet\n      await Promise.resolve()\n      await this.start()\n      ctx[name] = this\n    })\n\n    ctx.on('dispose', async () => {\n      ctx[name] = null\n      await this.stop()\n    })\n  }\n\n  get caller() {\n    return this[Context.current] as C\n  }\n}\n", "import { Component, reactive } from 'vue'\nimport { MaybeRefOrGetter, toValue } from '@vueuse/core'\nimport { Context, Dict, Disposable, Field, omit, root, router, store } from '.'\n\ndeclare module 'vue-router' {\n  interface RouteMeta {\n    activity?: Activity\n  }\n}\n\nexport namespace Activity {\n  export interface Options {\n    id?: string\n    path: string\n    strict?: boolean\n    component: Component\n    name: MaybeRefOrGetter<string>\n    desc?: MaybeRefOrGetter<string>\n    icon?: MaybeRefOrGetter<string>\n    order?: number\n    authority?: number\n    position?: 'top' | 'bottom'\n    fields?: Field[]\n    /** @deprecated */\n    when?: () => boolean\n    disabled?: () => boolean\n  }\n}\n\nexport const activities = reactive<Dict<Activity>>({})\n\nexport interface Activity extends Activity.Options {}\n\nfunction getActivityId(path: string) {\n  return path.split('/').find(Boolean) ?? ''\n}\n\nexport class Activity {\n  id: string\n  _disposables: Disposable[] = []\n\n  constructor(public ctx: Context, public options: Activity.Options) {\n    options.order ??= 0\n    options.position ??= 'top'\n    Object.assign(this, omit(options, ['icon', 'name', 'desc', 'disabled']))\n    const { path, id = getActivityId(path), component } = options\n    this._disposables.push(router.addRoute({ path, name: id, component, meta: { activity: this } }))\n    this.id ??= id\n    this.handleUpdate()\n    this.authority ??= 0\n    this.fields ??= []\n    activities[this.id] = this\n  }\n\n  handleUpdate() {\n    const { redirect } = router.currentRoute.value.query\n    if (typeof redirect === 'string') {\n      const location = router.resolve(redirect)\n      if (location.matched.length) {\n        router.replace(location)\n      }\n    }\n  }\n\n  get icon() {\n    return toValue(this.options.icon ?? 'activity:default')\n  }\n\n  get name() {\n    return toValue(this.options.name ?? this.id)\n  }\n\n  get desc() {\n    return toValue(this.options.desc)\n  }\n\n  disabled() {\n    if (root.bail('activity', this)) return true\n    if (!this.fields.every(key => store[key])) return true\n    if (this.when && !this.when()) return true\n    if (this.options.disabled?.()) return true\n  }\n\n  dispose() {\n    this._disposables.forEach(dispose => dispose())\n    const current = router.currentRoute.value\n    if (current?.meta?.activity === this) {\n      router.push({\n        path: '/',\n        query: { redirect: current.fullPath },\n      })\n    }\n    return delete activities[this.id]\n  }\n}\n", "import { RemovableRef, useLocalStorage, usePreferredDark } from '@vueuse/core'\nimport { computed, reactive, watchEffect } from 'vue'\nimport { Config } from '.'\n\nexport let useStorage = <T extends object>(key: string, version: number, fallback?: () => T): RemovableRef<T> => {\n  const initial = fallback ? fallback() : {} as T\n  initial['__version__'] = version\n  const storage = useLocalStorage('koishi.console.' + key, initial)\n  if (storage.value['__version__'] !== version) {\n    storage.value = initial\n  }\n  return storage\n}\n\nexport function provideStorage(factory: typeof useStorage) {\n  useStorage = factory\n}\n\ninterface StorageData<T> {\n  version: number\n  data: T\n}\n\nexport function createStorage<T extends object>(key: string, version: number, fallback?: () => T) {\n  const storage = useLocalStorage('koishi.console.' + key, {} as StorageData<T>)\n  const initial = fallback ? fallback() : {} as T\n  if (storage.value.version !== version) {\n    storage.value = { version, data: initial }\n  } else if (!Array.isArray(storage.value.data)) {\n    storage.value.data = { ...initial, ...storage.value.data }\n  }\n  return reactive<T>(storage.value['data'])\n}\n\nexport const config = useStorage<Config>('config', undefined, () => ({\n  theme: {\n    mode: 'auto',\n    dark: 'default-dark',\n    light: 'default-light',\n  },\n  locale: 'zh-CN',\n}))\n\nconst preferDark = usePreferredDark()\n\nconst mode = computed(() => {\n  const mode = config.value.theme.mode\n  if (mode !== 'auto') return mode\n  return preferDark.value ? 'dark' : 'light'\n})\n\nexport const useConfig = () => config\nexport const useColorMode = () => mode\n\nwatchEffect(() => {\n  const root = window.document.querySelector('html')\n  root.setAttribute('theme', config.value.theme[mode.value])\n  if (mode.value === 'dark') {\n    root.classList.add('dark')\n  } else {\n    root.classList.remove('dark')\n  }\n}, { flush: 'post' })\n", "import { reactive, watch } from 'vue'\nimport { Context, Dict, root, store } from '.'\nimport { EffectScope } from 'cordis'\n\nexport type Disposable = () => void\nexport type Extension = (ctx: Context) => void\n\nexport function defineExtension(callback: Extension) {\n  return callback\n}\n\nexport function unwrapExports(module: any) {\n  return module?.default || module\n}\n\nconst loaders: Dict<(ctx: Context, url: string) => Promise<void>> = {\n  async [`.css`](ctx, url) {\n    const link = document.createElement('link')\n    link.rel = 'stylesheet'\n    link.href = url\n    await new Promise((resolve, reject) => {\n      link.onload = resolve\n      link.onerror = reject\n      document.head.appendChild(link)\n      ctx.on('dispose', () => {\n        document.head.removeChild(link)\n      })\n    })\n  },\n  async [``](ctx, url) {\n    const exports = await import(/* @vite-ignore */ url)\n    ctx.plugin(unwrapExports(exports))\n  },\n}\n\nexport interface LoadResult {\n  scope: EffectScope\n  done: boolean\n  paths: string[]\n}\n\nexport const extensions: Dict<LoadResult> = reactive({})\n\nexport const initTask = new Promise<void>((resolve) => {\n  watch(() => store.entry, async (newValue, oldValue) => {\n    newValue ||= {}\n    for (const key in extensions) {\n      if (newValue[key]) continue\n      extensions[key].scope.dispose()\n      delete extensions[key]\n    }\n\n    await Promise.all(Object.entries(newValue).map(([key, { files, paths }]) => {\n      if (extensions[key]) return\n      const scope = root.plugin(() => {})\n      scope.ctx.extension = extensions[key] = { done: false, scope, paths }\n      const task = Promise.all(files.map((url) => {\n        for (const ext in loaders) {\n          if (!url.endsWith(ext)) continue\n          return loaders[ext](scope.ctx, url)\n        }\n      }))\n      task.finally(() => extensions[key].done = true)\n    }))\n\n    if (!oldValue) {\n      resolve()\n      if (!root.events.isActive) root.start()\n    }\n  }, { deep: true })\n})\n", "import * as cordis from 'cordis'\nimport { Schema, SchemaBase } from '@koishijs/components'\nimport { Dict, Intersect, remove } from 'cosmokit'\nimport {\n  App, Component, createApp, defineComponent, h, inject, markRaw, MaybeRefOrGetter,\n  onBeforeUnmount, provide, reactive, resolveComponent, shallowReactive, toValue,\n} from 'vue'\nimport { activities, Activity } from './activity'\nimport { SlotOptions } from './components'\nimport { useColorMode, useConfig } from './config'\nimport { extensions, LoadResult } from './loader'\nimport { ActionContext } from '.'\n\nexport type Plugin = cordis.Plugin<Context>\n\nexport namespace Plugin {\n  export type Function<T = any> = cordis.Plugin.Function<T, Context>\n  export type Constructor<T = any> = cordis.Plugin.Constructor<T, Context>\n  export type Object<S = any, T = any> = cordis.Plugin.Object<S, T, Context>\n}\n\nexport type EffectScope = cordis.EffectScope<Context>\nexport type ForkScope = cordis.ForkScope<Context>\nexport type MainScope = cordis.MainScope<Context>\nexport type Service = cordis.Service<Context>\n\nexport const Service = cordis.Service<Context>\n\nconst config = useConfig()\nconst mode = useColorMode()\n\n// layout api\n\nexport interface ThemeOptions {\n  id: string\n  name: string | Dict<string>\n  components?: Dict<Component>\n}\n\nexport type MaybeGetter<T> = T | ((scope: Flatten<ActionContext>) => T)\n\nexport interface Events<C extends Context> extends cordis.Events<C> {\n  'activity'(activity: Activity): boolean\n}\n\nexport interface Context {\n  [Context.events]: Events<this>\n}\n\nexport function useContext() {\n  const parent = inject('cordis') as Context\n  const fork = parent.plugin(() => {})\n  onBeforeUnmount(() => fork.dispose())\n  return fork.ctx\n}\n\nexport interface ActionOptions {\n  disabled?: (scope: Flatten<ActionContext>) => boolean\n  action: (scope: Flatten<ActionContext>) => any\n}\n\nexport type LegacyMenuItem = Partial<ActionOptions> & Omit<MenuItem, 'id'>\n\nexport interface MenuItem {\n  id: string\n  label?: MaybeGetter<string>\n  type?: MaybeGetter<string>\n  icon?: MaybeGetter<string>\n  order?: number\n}\n\ninterface SettingOptions extends Ordered {\n  id: string\n  title?: string\n  disabled?: () => boolean\n  schema?: Schema\n  component?: Component\n}\n\ninterface Ordered {\n  order?: number\n}\n\nfunction insert<T extends Ordered>(list: T[], item: T) {\n  markRaw(item)\n  const index = list.findIndex(a => a.order < item.order)\n  if (index >= 0) {\n    list.splice(index, 0, item)\n  } else {\n    list.push(item)\n  }\n}\n\ntype Store<S extends {}> = { [K in keyof S]?: MaybeRefOrGetter<S[K]> }\n\ntype Flatten<S extends {}> = Intersect<{\n  [K in keyof S]: K extends `${infer L}.${infer R}`\n    ? { [P in L]: Flatten<{ [P in R]: S[K] }> }\n    : { [P in K]: S[K] }\n}[keyof S]>\n\nclass Internal {\n  extensions = extensions\n  activities = activities\n  routeCache = routeCache\n  scope = shallowReactive<Store<ActionContext>>({})\n  menus = reactive<Dict<MenuItem[]>>({})\n  actions = reactive<Dict<ActionOptions>>({})\n  views = reactive<Dict<SlotOptions[]>>({})\n  themes = reactive<Dict<ThemeOptions>>({})\n  settings = reactive<Dict<SettingOptions[]>>({})\n  activeMenus = reactive<{ id: string; styles: Partial<CSSStyleDeclaration> }[]>([])\n\n  createScope(prefix = '') {\n    return new Proxy({}, {\n      get: (target, key) => {\n        if (typeof key === 'symbol') return target[key]\n        key = prefix + key\n        if (key in this.scope) return toValue(this.scope[key])\n        const _prefix = key + '.'\n        if (Object.keys(this.scope).some(k => k.startsWith(_prefix))) {\n          return this.createScope(key + '.')\n        }\n      },\n    })\n  }\n}\n\nexport function useMenu<K extends keyof ActionContext>(id: K) {\n  const ctx = useContext()\n  return (event: MouseEvent, value: MaybeRefOrGetter<ActionContext[K]>) => {\n    ctx.define(id, value)\n    event.preventDefault()\n    const { clientX, clientY } = event\n    ctx.internal.activeMenus.splice(0, Infinity, { id, styles: { left: clientX + 'px', top: clientY + 'px' } })\n  }\n}\n\nexport const routeCache = reactive<Record<keyof any, string>>({})\n\nexport class Context extends cordis.Context {\n  app: App\n  extension: LoadResult\n  internal = new Internal()\n\n  constructor() {\n    super()\n    this.app = createApp(defineComponent({\n      setup() {\n        return () => [\n          h(resolveComponent('k-slot'), { name: 'root', single: true }),\n          h(resolveComponent('k-slot'), { name: 'global' }),\n        ]\n      },\n    }))\n    this.app.provide('cordis', this)\n  }\n\n  wrapComponent(component: Component) {\n    if (!component) return\n    const caller = this[Context.current] || this\n    return defineComponent((props, { slots }) => {\n      provide('cordis', caller)\n      return () => h(component, props, slots)\n    })\n  }\n\n  /** @deprecated */\n  addView(options: SlotOptions) {\n    return this.slot(options)\n  }\n\n  /** @deprecated */\n  addPage(options: Activity.Options) {\n    return this.page(options)\n  }\n\n  slot(options: SlotOptions) {\n    options.order ??= 0\n    options.component = this.wrapComponent(options.component)\n    if (options.when) options.disabled = () => !options.when()\n    const list = this.internal.views[options.type] ||= []\n    insert(list, options)\n    return this.scope.collect('view', () => remove(list, options))\n  }\n\n  page(options: Activity.Options) {\n    options.component = this.wrapComponent(options.component)\n    const activity = new Activity(this, options)\n    return this.scope.collect('page', () => activity.dispose())\n  }\n\n  schema(extension: SchemaBase.Extension) {\n    SchemaBase.extensions.add(extension)\n    extension.component = this.wrapComponent(extension.component)\n    return this.scope.collect('schema', () => SchemaBase.extensions.delete(extension))\n  }\n\n  action(id: string, options: ActionOptions) {\n    markRaw(options)\n    this.internal.actions[id] = options\n    return this.scope.collect('actions', () => delete this.internal.actions[id])\n  }\n\n  menu(id: string, items: MenuItem[]) {\n    const list = this.internal.menus[id] ||= []\n    items.forEach(item => insert(list, item))\n    return this.scope.collect('menus', () => {\n      items.forEach(item => remove(list, item))\n      return true\n    })\n  }\n\n  define<K extends keyof ActionContext>(key: K, value: MaybeRefOrGetter<ActionContext[K]>) {\n    this.internal.scope[key] = value as any\n    return this.scope.collect('activate', () => delete this.internal.scope[key])\n  }\n\n  settings(options: SettingOptions) {\n    markRaw(options)\n    options.order ??= 0\n    options.component = this.wrapComponent(options.component)\n    const list = this.internal.settings[options.id] ||= []\n    insert(list, options)\n    if (options.schema) {\n      try {\n        options.schema(config.value, { autofix: true })\n      } catch (error) {\n        console.error(error)\n      }\n    }\n    return this.scope.collect('settings', () => remove(list, options))\n  }\n\n  theme(options: ThemeOptions) {\n    markRaw(options)\n    this.internal.themes[options.id] = options\n    for (const [type, component] of Object.entries(options.components || {})) {\n      this.slot({\n        type,\n        disabled: () => config.value.theme[mode.value] !== options.id,\n        component,\n      })\n    }\n    return this.scope.collect('view', () => delete this.internal.themes[options.id])\n  }\n}\n\nmarkRaw(cordis.Context.prototype)\nmarkRaw(cordis.EffectScope.prototype)\n", "import { App, defineComponent, h } from 'vue'\nimport { RouterLink } from 'vue-router'\nimport { useContext } from '../context'\n\nconst KActivityLink = defineComponent({\n  props: {\n    id: String,\n  },\n  setup(props, { slots }) {\n    const ctx = useContext()\n    return () => {\n      const activity = ctx.internal.activities[props.id]\n      return h(RouterLink, {\n        to: ctx.internal.routeCache[activity?.id] || activity?.path.replace(/:.+/, ''),\n      }, {\n        default: () => slots.default?.() ?? activity?.name,\n      })\n    }\n  },\n})\n\nexport default function (app: App) {\n  app.component('k-activity-link', KActivityLink)\n}\n", "import { useContext } from '../context'\nimport { App, Component, defineComponent, h } from 'vue'\n\nexport interface SlotItem {\n  order?: number\n  component: Component\n}\n\nexport interface SlotOptions extends SlotItem {\n  type: string\n  /** @deprecated */\n  when?: () => boolean\n  disabled?: () => boolean\n}\n\nexport const KSlot = defineComponent({\n  props: {\n    name: String,\n    data: Object,\n    single: Boolean,\n  },\n  setup(props, { slots }) {\n    const ctx = useContext()\n    return () => {\n      const internal = props.single ? [] : [...slots.default?.() || []]\n        .filter(node => node.type === KSlotItem)\n        .map(node => ({ node, order: node.props?.order || 0 }))\n      const external = [...ctx.internal.views[props.name] || []]\n        .filter(item => !item.disabled?.())\n        .map(item => ({\n          node: h(item.component, { data: props.data, ...props.data }, slots),\n          order: item.order,\n          layer: 1,\n        }))\n      const children = [...internal, ...external].sort((a, b) => b.order - a.order)\n      if (props.single) {\n        return children[0]?.node || slots.default?.()\n      }\n      return children.map(item => item.node)\n    }\n  },\n})\n\nconst KSlotItem = defineComponent({\n  props: {\n    order: Number,\n  },\n  setup(props, { slots }) {\n    return () => slots.default?.()\n  },\n})\n\nfunction defineSlotComponent(name: string) {\n  return defineComponent({\n    inheritAttrs: false,\n    setup(_, { slots, attrs }) {\n      return () => h(KSlot, { name, data: attrs, single: true }, slots)\n    },\n  })\n}\n\nexport default (app: App) => {\n  app.component('k-slot', KSlot)\n  app.component('k-slot-item', KSlotItem)\n  app.component('k-layout', defineSlotComponent('layout'))\n  app.component('k-status', defineSlotComponent('status'))\n}\n", "import { createRouter, createWebHistory, START_LOCATION } from 'vue-router'\nimport { global } from './data'\nimport install, { Dict } from './components'\nimport Overlay from './components/chat/overlay.vue'\nimport { config } from './config'\nimport { initTask } from './loader'\nimport { Context, routeCache } from './context'\nimport { createI18n } from 'vue-i18n'\nimport { watchEffect } from 'vue'\n\ndeclare module '@koishijs/plugin-console' {\n  export interface ClientConfig {\n    messages?: Dict<string>\n    unsupported?: string[]\n  }\n}\n\nexport * from './activity'\nexport * from './components'\nexport * from './config'\nexport * from './context'\nexport * from './loader'\nexport * from './data'\nexport * from './utils'\n\nexport default install\n\nexport interface ActionContext {}\n\nexport interface Config {\n  theme: Config.Theme\n  locale?: string\n}\n\nexport namespace Config {\n  export interface Theme {\n    mode: 'auto' | 'dark' | 'light'\n    dark: string\n    light: string\n  }\n}\n\nexport const root = new Context()\n\nexport const router = createRouter({\n  history: createWebHistory(global.uiPath),\n  linkActiveClass: 'active',\n  routes: [],\n})\n\nrouter.afterEach((route) => {\n  const { name, fullPath } = router.currentRoute.value\n  routeCache[name] = fullPath\n  if (route.meta.activity) {\n    document.title = `${route.meta.activity.name} | ${global.messages?.title || 'Koishi 控制台'}`\n  }\n})\n\nexport const i18n = createI18n({\n  legacy: false,\n  fallbackLocale: 'zh-CN',\n})\n\nwatchEffect(() => {\n  i18n.global.locale.value = config.value.locale\n})\n\nroot.app.use(install)\nroot.app.use(i18n)\nroot.app.use(router)\n\nroot.slot({\n  type: 'global',\n  component: Overlay,\n})\n\nroot.on('activity', data => !data)\n\nrouter.beforeEach(async (to, from) => {\n  if (to.matched.length) return\n\n  if (from === START_LOCATION) {\n    await initTask\n    to = router.resolve(to)\n    if (to.matched.length) return to\n  }\n\n  return {\n    path: '/',\n    query: { redirect: to.fullPath },\n  }\n})\n", "import { defineComponent, h, resolveComponent } from 'vue'\nimport { Console } from '@koishijs/plugin-console'\nimport { isNullable } from 'cosmokit'\nimport { Store, store } from './data'\n\nexport type Field = keyof Console.Services\n\nexport namespace Card {\n  export function create(render: Function, fields: readonly Field[] = []) {\n    return defineComponent({\n      render: () => fields.every(key => store[key]) ? render() : null,\n    })\n  }\n\n  export interface NumericOptions {\n    icon: string\n    title: string\n    type?: string\n    fields?: Field[]\n    content: (store: Store) => any\n  }\n\n  export function numeric({ type, icon, fields, title, content }: NumericOptions) {\n    if (!type) {\n      return defineComponent(() => () => {\n        if (!fields.every(key => store[key])) return\n        return h(resolveComponent('k-numeric'), { icon, title }, () => content(store))\n      })\n    }\n\n    return defineComponent(() => () => {\n      if (!fields.every(key => store[key])) return\n      let value = content(store)\n      if (isNullable(value)) return\n      if (type === 'size') {\n        if (value >= (1 << 20) * 1000) {\n          value = (value / (1 << 30)).toFixed(1) + ' GB'\n        } else if (value >= (1 << 10) * 1000) {\n          value = (value / (1 << 20)).toFixed(1) + ' MB'\n        } else {\n          value = (value / (1 << 10)).toFixed(1) + ' KB'\n        }\n      }\n      return h(resolveComponent('k-numeric'), { icon, title }, () => [value])\n    })\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASO,IAAM,SAAS;AACf,IAAM,QAAQ,SAAgB,CAAC,CAAC;AAEhC,IAAM,SAAS,IAAuB,IAAI;AACjD,IAAM,YAAiD,CAAC;AACxD,IAAM,gBAAsD,CAAC;AAGtD,SAAS,KAAK,SAAiB,MAAa;AACjD,MAAI,CAAC,OAAO;AAAO;AACnB,UAAQ,MAAM,OAAO,eAAe,MAAM,IAAI;AAC9C,QAAM,KAAK,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,MAAM,GAAG,CAAC;AAChD,SAAO,MAAM,KAAK,KAAK,UAAU,EAAE,IAAI,MAAM,KAAK,CAAC,CAAC;AACpD,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,kBAAc,EAAE,IAAI,CAAC,SAAS,MAAM;AACpC,eAAW,MAAM;AACf,aAAO,cAAc,EAAE;AACvB,aAAO,IAAI,MAAM,SAAS,CAAC;AAAA,IAC7B,GAAG,GAAK;AAAA,EACV,CAAC;AACH;AAEO,SAAS,QAAiB,OAAe,UAA6B;AAC3E,YAAU,KAAK,IAAI;AACrB;AAEA,QAAQ,QAAQ,CAAC,EAAE,KAAK,MAAM,MAAM;AAClC,QAAM,GAAG,IAAI;AACf,CAAC;AAED,QAAQ,SAAS,CAAC,EAAE,KAAK,MAAM,MAAM;AACnC,MAAI,MAAM,QAAQ,MAAM,GAAG,CAAC,GAAG;AAC7B,UAAM,GAAG,EAAE,KAAK,GAAG,KAAK;AAAA,EAC1B,WAAW,MAAM,GAAG,GAAG;AACrB,WAAO,OAAO,MAAM,GAAG,GAAG,KAAK;AAAA,EACjC;AACF,CAAC;AAED,QAAQ,YAAY,CAAC,EAAE,IAAI,OAAO,MAAM,MAAM;AAC5C,MAAI,CAAC,cAAc,EAAE;AAAG;AACxB,QAAM,CAAC,SAAS,MAAM,IAAI,cAAc,EAAE;AAC1C,SAAO,cAAc,EAAE;AACvB,MAAI,OAAO;AACT,WAAO,KAAK;AAAA,EACd,OAAO;AACL,YAAQ,KAAK;AAAA,EACf;AACF,CAAC;AAEM,SAAS,QAAQ,UAAmC;AACzD,QAAM,QAAQ,SAAS;AAEvB,MAAI;AACJ,MAAI;AACJ,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,OAAO;AAAW;AACvB,iBAAa,SAAS;AACtB,iBAAa,UAAU;AACvB,gBAAY,CAAC,WAAW,MAAM,KAAK,MAAM,GAAG,OAAO,UAAU,QAAQ;AACrE,iBAAa,CAAC,WAAW,MAAM,+BAAO,SAAS,OAAO,UAAU,OAAO;AAAA,EACzE;AAEA,QAAM,YAAY,MAAM;AACtB,WAAO,QAAQ;AACf,eAAW,OAAO,OAAO;AACvB,YAAM,GAAG,IAAI;AAAA,IACf;AACA,YAAQ,IAAI,sDAAsD;AAClE,eAAW,MAAM;AACf,cAAQ,QAAQ,EAAE,KAAK,SAAS,QAAQ,MAAM;AAC5C,gBAAQ,IAAI,sDAAsD;AAAA,MACpE,CAAC;AAAA,IACH,GAAG,GAAI;AAAA,EACT;AAEA,QAAM,iBAAiB,WAAW,CAAC,OAAO;AACxC,YAAQ;AACR,UAAM,OAAO,KAAK,MAAM,GAAG,IAAI;AAC/B,YAAQ,MAAM,OAAO,gBAAgB,KAAK,MAAM,KAAK,IAAI;AACzD,QAAI,KAAK,QAAQ,WAAW;AAC1B,gBAAU,KAAK,IAAI,EAAE,KAAK,IAAI;AAAA,IAChC;AAAA,EACF,CAAC;AAED,QAAM,iBAAiB,SAAS,SAAS;AAEzC,SAAO,IAAI,QAAiC,CAAC,SAAS,WAAW;AAC/D,UAAM,iBAAiB,QAAQ,CAAC,UAAU;AACxC,aAAO,QAAQ,QAAQ,KAAK;AAC5B,cAAQ,KAAK;AAAA,IACf,CAAC;AACD,UAAM,iBAAiB,SAAS,MAAM;AAAA,EACxC,CAAC;AACH;;;ACpGA,UAAqB;;;AAKrB,IAAM,cAAc;;EAElB;EAAW;EAAW;EAAS;EAAU;EACzC;EAAM;EAAM;EAAM;EAAM;EAAM;EAAM;EACpC;EAAQ;EAAO;;EAEf;EAAc;EAAM;EAAO;EAAM;EAAM;EAAc;EACrD;EAAM;EAAM;EAAQ;EAAM;EAAK;EAAO;;EAEtC;EAAK;EAAQ;EAAK;EAAO;EAAO;EAAM;EAAQ;EAAQ;EAAQ;EAC9D;EAAM;EAAK;EAAO;EAAQ;EAC1B;EAAM;EAAM;EAAM;EAAO;EACzB;EAAK;EAAQ;EAAS;EAAQ;EAAU;EAAO;EAAO;EAAQ;EAAK;EAAO;;EAE1E;EAAW;EAAO;EAAY;EAAS;EAAS;EAAM;EAAS;EAC/D;EAAS;AACX;AAEA,IAAM,WAAW,CAAC,OAAO,MAAM,MAAM,QAAQ,QAAQ,YAAY,SAAS,QAAQ,MAAM;AAExF,IAAM,mBAAmB,CAAC,SAAS,UAAU,WAAW,MAAM;AAE9D,SAAS,SAAS,OAAe;AAC/B,MAAI;AACF,UAAM,MAAM,IAAI,IAAI,OAAO,SAAS,SAAS,CAAC;AAC9C,WAAO,iBAAiB,SAAS,IAAI,QAAQ;EAC/C,SAAS,GAAP;AACA,WAAO;EACT;AACF;AAPS,OAAA,UAAA,UAAA;AASF,SAASA,UAAS,MAAc;AACrC,QAAM,YAA4B;IAChC,GAAG,OAAO,YAAY,YAAY,IAAI,CAAA,QAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;EACzD;AACA,QAAM,QAAkB,CAAC;AACzB,SAAW,cAAU,MAAM;IACzB;IACA,gBAAgB;IAChB,MAAM,KAAK,KAAK,SAAS;AACvB,UAAIC;AACJ,UAAI,QAAQ,OAAO,CAAC,QAAQ,WAAW;AACrC,cAAM,QAAa,CAAC;AAChB,QAAA,cAAU,IAAI,MAAM,CAAC,GAAG,CAAC,MAAM,UAAU;AAC3C,cAAI,SAAS,QAAQ;AACnB,kBAAM,IAAI,IAAI,SAAS,KAAK,IAAI,QAAQ;UAC1C,WAAW,SAAS,SAAS;AAC3B,kBAAM,IAAI,IAAQ,oBAAgB,KAAK;UACzC;AACA,iBAAO;QACT,CAAC;AACD,cAAM,MAAM;AACZ,cAAM,SAAS;AACfA,gBAAO,MAAM,OAAO,QAAQ,KAAK,EAAE,IAAI,CAAC,CAAC,MAAM,KAAK,MAAM,GAAG,IAAA,KAAS,KAAA,GAAQ,EAAE,KAAK,GAAG,CAAA;MAC1F;AACA,UAAI,IAAI,SAAS,IAAI,KAAK,SAAS,SAAS,GAAG;AAAG;AAClD,UAAI,CAAC,QAAQ,WAAW;AACtB,cAAM,KAAK,GAAG;AACd,eAAOA;MACT;AACA,UAAI,SAAS;AACb,aAAO,MAAM,QAAQ;AACnB,cAAM,OAAO,MAAM,IAAI;AACvB,YAAI,SAAS,KAAK;AAChB,iBAAO,SAAS;QAClB;AACA,kBAAU,KAAK,IAAA;MACjB;AACA,aAAO,IAAI,QAAQ,MAAM,MAAM,EAAE,QAAQ,MAAM,MAAM;IACvD;EACF,CAAC;AACD,SAAO,MAAM,QAAQ;AACnB,UAAM,OAAO,MAAM,IAAI;AACvB,YAAQ,KAAK,IAAA;EACf;AACA,SAAO;AACT;AA7CgB,OAAAD,WAAA,UAAA;AA+ChB,IAAOE,eAAQ,gBAAgB;EAC7B,OAAO;IACL,QAAQ;IACR,QAAQ;IACR,KAAK;IACL,QAAQ;EACV;EACA,MAAM,OAAO;AACX,WAAO,MAAM;AACX,UAAI,OAAO,MAAM,SACb,OAAO,YAAY,MAAM,UAAU,EAAE,IACrC,OAAO,MAAM,MAAM,UAAU,EAAE;AACnC,UAAI,CAAC,MAAM;AAAQ,eAAOF,UAAS,IAAI;AACvC,YAAM,MAAM,MAAM,QAAQ,MAAM,SAAS,SAAS;AAClD,aAAO,EAAE,KAAK;QACZ,OAAO;QACP,WAAW;MACb,CAAC;IACH;EACF;AACF,CAAC;;;ACxGD,OAAO,YAAY;AACnB,OAAO,UAAU;AACjB,OAAO,SAAS;AAED,SAAR,eAAkB,KAAU;AACjC,MAAI,UAAU,YAAY,MAAM;AAChC,MAAI,UAAU,UAAU,IAAI;AAC5B,MAAI,UAAU,SAAS,GAAG;AAC5B;;;ACHA,OAAO,aAAa;AACpB,OAAO,eAAe;;;ACPtB;AAAA;AAAA;AAAA;AAAA;AAEA,OAAO,aAAa;AACpB,OAAO,cAAc;AACrB,OAAO,UAAU;AACjB,OAAO,UAAU;AACjB,OAAO,cAAc;AACrB,OAAO,SAAS;AAChB,OAAO,aAAa;AACpB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAC1B,OAAO,UAAU;AACjB,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,iBAAiB;AACxB,OAAO,YAAY;AACnB,OAAO,YAAY;AACnB,OAAO,YAAY;AACnB,OAAO,cAAc;AACrB,OAAO,YAAY;AACnB,OAAO,UAAU;AACjB,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,UAAU;AACjB,OAAO,YAAY;AACnB,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,cAAc;AACrB,OAAO,WAAW;AAClB,OAAO,SAAS;AAChB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,UAAU;AACjB,OAAO,UAAU;AAEjB,OAAO;AAEP,IAAM,WAAsC,SAAS,CAAC,CAAC;AAEvD,SAAS,oBAAoB,OAAO;AACpC,SAAS,qBAAqB,QAAQ;AACtC,SAAS,iBAAiB,IAAI;AAC9B,SAAS,iBAAiB,IAAI;AAC9B,SAAS,qBAAqB,QAAQ;AACtC,SAAS,gBAAgB,GAAG;AAE5B,SAAS,YAAuB,WAAW;AAC3C,SAAS,cAAyB,aAAa;AAC/C,SAAS,YAAY,OAAO;AAC5B,SAAS,cAAc,SAAS;AAChC,SAAS,gBAAgB,WAAW;AACpC,SAAS,gBAAgB,WAAW;AACpC,SAAS,iBAAiB,YAAY;AACtC,SAAS,cAAc,SAAS;AAChC,SAAS,kBAAkB,aAAa;AACxC,SAAS,SAAoB,SAAS;AACtC,SAAS,UAAqB,UAAU;AACxC,SAAS,QAAQ,IAAI;AACrB,SAAS,oBAAoB,eAAe;AAC5C,SAAS,UAAU,MAAM;AACzB,SAAS,YAAuB,YAAY;AAC5C,SAAS,aAAwB,YAAY;AAC7C,SAAS,OAAkB,OAAO;AAClC,SAAS,gBAAgB,WAAW;AACpC,SAAS,UAAU,MAAM;AACzB,SAAS,UAAU,MAAM;AACzB,SAAS,UAAU,MAAM;AACzB,SAAS,aAAa,QAAQ;AAC9B,SAAS,UAAU,MAAM;AACzB,SAAS,QAAQ,IAAI;AACrB,SAAS,eAAe,UAAU;AAClC,SAAS,kBAAkB,aAAa;AACxC,SAAS,QAAQ,IAAI;AACrB,SAAS,UAAU,MAAM;AACzB,SAAS,gBAAgB,WAAW;AACpC,SAAS,eAAe,UAAU;AAClC,SAAS,cAAc,SAAS;AAChC,SAAS,aAAa,QAAQ;AAC9B,SAAS,SAAS,KAAK;AACvB,SAAS,OAAO,GAAG;AACnB,SAAS,cAAc,SAAS;AAChC,SAAS,SAAS,KAAK;AACvB,SAAS,QAAQ,IAAI;AACrB,SAAS,QAAQ,IAAI;AAEd,SAAS,SAAS,MAAc,WAAsB;AAC3D,WAAS,IAAI,IAAI,QAAQ,SAAS;AACpC;AAEO,SAAS,QAAQ,KAAU;AAChC,MAAI,UAAU,UAAU,gBAAgB;AAAA,IACtC,OAAO;AAAA,MACL,MAAM;AAAA,IACR;AAAA,IACA,OAAO,OAAO;AACZ,YAAM,YAAY,SAAS,MAAM,IAAI;AACrC,aAAO,aAAa,EAAE,SAAS;AAAA,IACjC;AAAA,EACF,CAAC,CAAC;AACJ;;;ACvGA,OAAO,iBAAiB;AACxB,OAAO,UAAU;AACjB,OAAO,aAAa;AACpB,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,aAAa;AAEL,SAAR,eAAkB,KAAU;AACjC,MAAI,UAAU,aAAa,WAAW;AACtC,MAAI,UAAU,UAAU,IAAI;AAC5B,MAAI,UAAU,aAAa,OAAO;AAClC,MAAI,UAAU,WAAW,KAAK;AAC9B,MAAI,UAAU,eAAe,QAAQ;AACrC,MAAI,UAAU,cAAc,OAAO;AACrC;;;;;AEVO,SAAS,SAAS,OAAY;AACnC,SAAO,UAAU,QAAQ,UAAU,SAAS,UAAU;AACxD;AAFgBG,QAAA,UAAA,UAAA;;AAkCT,IAAM,aAAN,WAAgB;EAOrB,YAAoBC,OAAe;AAJnC,oCAAW;AACX,kCAAS,oBAAI,IAAmB;AAChC,kCAAkE,CAAC;AAE/C,SAAA,OAAAA;AAClB,mBAAe,MAAM,QAAQ,SAASA,KAAI;AAC1C,mBAAe,KAAK,GAAG,iBAAiB,SAAU,MAAM,UAAU,SAAS;AACzE,YAAM,SAAS,UAAU,YAAY;AACrC,YAAM,EAAE,MAAM,IAAI,KAAK,QAAQ,OAAO;AACtC,YAAM,EAAE,SAAS,YAAY,IAAI;AACjC,UAAI,SAAS,WAAW,KAAK,UAAU;AACrC,cAAM,OAAO,YAAY,SAAS,CAAC;MACrC,WAAW,SAAS,WAAW;AAC7B,oBAAY,MAAM,EAAE,QAAe;AACnC,uBAAe,UAAU,QAAQ,iBAAiB;AAClD,eAAO,MAAM,OAAO,aAAa,QAAQ;MAC3C,WAAW,SAAS,QAAQ;AAC1B,gBAAQ,UAAU,MAAM,EAAE,QAAe;AACzC,eAAO,MAAM,QAAQ,gBAAgB,MAAM,OAAO,QAAQ,WAAW,QAAQ,CAAC;MAChF;IACF,CAAC,GAAG,QAAQ,QAAQA,MAAK,KAAK;EAChC;;EAGA,MAAM,OAAY;AAChB,SAAK,QAAQ,OAAO,EAAE,MAAM,OAAO,YAAY,KAAK;EACtD;EAEA,MAAM,QAAQ;AACZ,WAAO,KAAK,OAAO,MAAM;AACvB,YAAM,QAAQ,IAAI,MAAM,KAAK,KAAK,MAAM,CAAC;IAC3C;EACF;EAEA,CAAE,SAAS,MAAiB,SAAkB;AAC5C,UAAM,QAAQ,KAAK,OAAO,IAAI,KAAK,CAAC;AACpC,eAAW,CAAC,SAAS,QAAQ,KAAK,MAAM,MAAM,GAAG;AAC/C,YAAM,SAAS,mCAAU,QAAQ;AACjC,UAAI,UAAU,CAAC,OAAO,KAAK,SAAS,OAAO;AAAG;AAC9C,YAAM;IACR;EACF;EAEA,MAAM,YAAY,MAAa;AAC7B,UAAM,UAAU,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,MAAM,IAAI;AAC7D,UAAM,OAAO,KAAK,MAAM;AACxB,UAAM,QAAQ,IAAI,CAAC,GAAG,KAAK,SAAS,MAAM,OAAO,CAAC,EAAE,IAAI,OAAO,aAAa;AAC1E,YAAM,SAAS,MAAM,SAAS,IAAI;IACpC,CAAC,CAAC;EACJ;EAEA,QAAQ,MAAa;AACnB,UAAM,UAAU,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,MAAM,IAAI;AAC7D,UAAM,OAAO,KAAK,MAAM;AACxB,eAAW,YAAY,KAAK,SAAS,MAAM,OAAO,GAAG;AACnD,eAAS,MAAM,SAAS,IAAI;IAC9B;EACF;EAEA,MAAM,UAAU,MAAa;AAC3B,UAAM,UAAU,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,MAAM,IAAI;AAC7D,UAAM,OAAO,KAAK,MAAM;AACxB,eAAW,YAAY,KAAK,SAAS,MAAM,OAAO,GAAG;AACnD,YAAM,SAAS,MAAM,SAAS,MAAM,SAAS,IAAI;AACjD,UAAI,SAAS,MAAM;AAAG,eAAO;IAC/B;EACF;EAEA,QAAQ,MAAa;AACnB,UAAM,UAAU,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,MAAM,IAAI;AAC7D,UAAM,OAAO,KAAK,MAAM;AACxB,eAAW,YAAY,KAAK,SAAS,MAAM,OAAO,GAAG;AACnD,YAAM,SAAS,SAAS,MAAM,SAAS,IAAI;AAC3C,UAAI,SAAS,MAAM;AAAG,eAAO;IAC/B;EACF;EAEA,SAAS,OAAe,OAAyB,UAAe,SAAmB;AACjF,UAAM,eAAe,KAAK,KAAK,OAAO;AACtC,QAAI,MAAM,UAAU,cAAe;AACjC,WAAK,KAAK,KAAK,oBAAoB,uBAAuB,YAAa,SAAS,KAAK,iDAAiD;IACxI;AAEA,UAAM,SAAS,KAAK,QAAQ,OAAO;AACnC,UAAM,SAAS,UAAU,YAAY;AACrC,UAAM,MAAM,EAAE,CAAC,QAAQ,QAAQ,CAAC;AAChC,WAAO,OAAO,MAAM,QAAQ,OAAO,MAAM,KAAK,WAAW,OAAO,QAAQ,CAAC;EAC3E;EAEA,WAAW,OAAyB,UAAe;AACjD,UAAM,QAAQ,MAAM,UAAU,CAAC,CAAC,SAAS,QAAQ,MAAM,aAAa,QAAQ;AAC5E,QAAI,SAAS,GAAG;AACd,YAAM,OAAO,OAAO,CAAC;AACrB,aAAO;IACT;EACF;EAEA,GAAG,MAAiB,UAAiC,UAAU,OAAO;;AAEpE,UAAM,SAAS,KAAK,KAAK,MAAM,iBAAiB,MAAM,UAAU,OAAO;AACvE,QAAI;AAAQ,aAAO;AAEnB,UAAM,SAAQC,MAAA,KAAK,QAAL,UAAAA,IAAA,QAAsB,CAAC;AACrC,UAAM,QAAQ,OAAO,SAAS,WAAW,UAAU,IAAI,MAAM;AAC7D,WAAO,KAAK,SAAS,OAAO,OAAO,UAAU,OAAO;EACtD;EAEA,KAAK,MAAiB,UAAiC,UAAU,OAAO;AACtE,UAAM,UAAU,KAAK,GAAG,MAAM,YAAa,MAAa;AACtD,cAAQ;AACR,aAAO,SAAS,MAAM,MAAM,IAAI;IAClC,GAAG,OAAO;AACV,WAAO;EACT;EAEA,IAAI,MAAiB,UAAiC;AACpD,WAAO,KAAK,WAAW,KAAK,OAAO,IAAI,KAAK,CAAC,GAAG,QAAQ;EAC1D;EAEA,MAAM,QAAQ;AACZ,SAAK,WAAW;AAChB,UAAM,QAAQ,KAAK,OAAO,SAAS,CAAC;AACpC,WAAO,MAAM,QAAQ;AACnB,YAAM,CAAC,SAAS,QAAQ,IAAI,MAAM,MAAM;AACxC,cAAQ,MAAM,OAAO,YAAY,SAAS,CAAC;IAC7C;AACA,UAAM,KAAK,MAAM;EACnB;EAEA,MAAM,OAAO;AACX,SAAK,WAAW;AAEhB,SAAK,KAAK,MAAM,MAAM;EACxB;AACF,GAzIuBF,QAAA,IAAA,WAAA,GACrB,cADK,IACW,WAAU,CAAC,MAAM,QAAQ,OAAO,UAAU,SAAS,YAAY,QAAQ,UAAU,QAAQ,SAAS,MAAM,IADnH;AGvCA,SAAS,cAAc,MAA8C;AAE1E,MAAI,CAAC,KAAK;AAAW,WAAO;AAE5B,MAAI,KAAK,UAAU,gBAAgB;AAAM,WAAO;AAChD,SAAO;AACT;AANgBA,QAAA,eAAA,eAAA;AAQT,SAAS,eAAe,UAAe;AAC5C,SAAO,OAAO,eAAe,QAAQ,EAAE;AACzC;AAFgBA,QAAA,gBAAA,gBAAA;AAIT,SAAS,cAAc,QAAaG,SAAa;AACtD,MAAIA,YAAW;AAAO;AACtB,MAAIA,YAAW;AAAM,IAAAA,UAAS;AAE9B,QAAM,SAAS,OAAO,QAAQ,KAAK,OAAO,QAAQ;AAClD,MAAI,UAAU,OAAO,QAAQ,MAAM;AAAO,IAAAA,UAAS,OAAOA,OAAM;AAChE,SAAOA,WAAU,CAAC;AACpB;AAPgBH,QAAA,eAAA,eAAA;;ADkBT,IAAe,eAAfE,MAAA,MAAwD;EAkB7D,YAAmB,QAAkBC,SAAqB;AAjBnD;AACA;AACA,uCAA4B,CAAC;AAC7B;AACA,kCAAsB;AAEnB;AACA;AACA,qCAAwB,CAAC;AACzB,iCAAQ,oBAAI,IAAmB;AAC/B,oCAAW;AACX,oCAAW;AAMF,SAAA,SAAA;AAAkB,SAAA,SAAAA;AACnC,SAAK,MAAM,OAAO,WAAW,OAAO,SAAS,UAAU;AACvD,SAAK,MAAM,KAAK,UAAU,OAAO,OAAO,EAAE,OAAO,KAAK,CAAC;AACvD,SAAK,QAAQ,IAAI,MAAM,CAAC,GAAG;MACzB,KAAK,CAAC,QAAQ,QAAQ,QAAQ,IAAI,KAAK,QAAQ,GAAG;IACpD,CAAC;EACH;EAEA,IAAc,UAAU;AACtB,WAAO,KAAK,QAAQ,aAAa,KAAK,QAAQ,KAAK;EACrD;EAEA,QAAQ,OAAe,UAAqB;AAC1C,UAAM,UAAUC,eAAe,MAAM;AACnCC,aAAO,KAAK,aAAa,OAAO;AAChC,aAAO,SAAS;IAClB,GAAG,QAAQ,KAAK;AAChB,SAAK,YAAY,KAAK,OAAO;AAC7B,WAAO;EACT;EAEA,UAAU;AACR,SAAK,MAAM;AACX,SAAK,MAAM;EACb;EAEU,aAAa;AACrB,QAAI,KAAK,QAAQ;AAAM,aAAO;AAC9B,QAAI,KAAK;AAAU,aAAO;AAC1B,QAAI,KAAK,MAAM;AAAM,aAAO;AAC5B,QAAI,KAAK;AAAO,aAAO;AACvB,WAAO;EACT;EAEU,cAAc,UAAuB;AAC7C,UAAM,WAAW,KAAK;AACtB;AACA,SAAK,SAAS,KAAK,WAAW;AAC9B,QAAI,aAAa,KAAK,QAAQ;AAC5B,WAAK,QAAQ,KAAK,mBAAmB,MAAM,QAAQ;IACrD;EACF;EAEA,OAAO,UAA+B;AACpC,UAAM,OAAO,SAAS,EACnB,MAAM,CAAC,WAAW;AACjB,WAAK,QAAQ,KAAK,oBAAoB,MAAM;AAC5C,WAAK,OAAO,MAAM;IACpB,CAAC,EACA,QAAQ,MAAM;AACb,WAAK,cAAc,MAAM,KAAK,MAAM,OAAO,IAAI,CAAC;AAChD,WAAK,QAAQ,OAAO,OAAO,OAAO,IAAI;IACxC,CAAC;AACH,SAAK,cAAc,MAAM,KAAK,MAAM,IAAI,IAAI,CAAC;AAC7C,SAAK,QAAQ,OAAO,OAAO,IAAI,IAAI;EACrC;EAEA,OAAO,QAAa;AAClB,SAAK,QAAQ;AACb,SAAK,cAAc,MAAM,KAAK,WAAW,IAAI;AAC7C,SAAK,MAAM;EACb;EAEU,QAAQ;AAChB,QAAI,CAAC,KAAK,QAAQ,MAAM;AAAQ;AAChCD,mBAAe,KAAK,QAAQ,GAAG,2BAA2B,CAAC,SAAS;AAClE,UAAI,CAAC,KAAK,QAAQ,MAAM,SAAS,IAAI;AAAG;AACxC,WAAK,cAAc;AACnB,WAAK,MAAM;IACb,CAAC,GAAG,QAAQ,QAAQ,IAAI;AACxBA,mBAAe,KAAK,QAAQ,GAAG,oBAAoB,CAAC,SAAS;AAC3D,UAAI,CAAC,KAAK,QAAQ,MAAM,SAAS,IAAI;AAAG;AACxC,WAAK,MAAM;IACb,CAAC,GAAG,QAAQ,QAAQ,IAAI;EAC1B;EAEA,IAAI,QAAQ;AACV,WAAO,KAAK,QAAQ,MAAM,MAAM,CAAA,SAAQ,KAAK,IAAI,IAAI,CAAC;EACxD;EAEA,QAAQ;AACN,SAAK,WAAW;AAChB,SAAK,cAAc,KAAK,YAAY,OAAO,CAAC,EAAE,OAAO,CAAC,YAAY;AAChE,UAAI,KAAK,QAAQ,QAAQ,QAAQ,QAAQ,MAAM,MAAM;AAAM,eAAO;AAClE,cAAQ;IACV,CAAC;EACH;EAEA,QAAQ;AACN,QAAI,CAAC,KAAK,SAAS,KAAK,YAAY,KAAK,QAAQ;AAAM,aAAO;AAC9D,SAAK,WAAW;AAChB,SAAK,cAAc,MAAM,KAAK,WAAW,KAAK;EAChD;EAIA,UAAU,MAAa;;AACrB,UAAM,OAAO,MAAM,QAAQ,KAAK,CAAC,CAAC,IAAI,KAAK,MAAM,IAAI;AACrD,UAAM,WAAqB,EAAE,MAAM,UAAU,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,EAAE;AACjE,SAAK,UAAU,KAAK,QAAQ;AAC5B,QAAI,SAAS;AAAW,OAAAF,MAAA,SAAS,aAAT,gBAAAA,IAAA,eAAoB,KAAK;AACjD,WAAO,KAAK,QAAQ,YAAW,6BAAM,KAAK,UAAS,GAAG,KAAK,MAAMG,OAAO,KAAK,WAAW,QAAQ,CAAC;EACnG;EAEA,QAAQ,MAAgB;AACtB,WAAO,KAAK,OAAO,MAAM,MAAM,IAAI;EACrC;EAEA,YAAY,UAAe,QAAkB;AAC3C,QAAI;AAAQ,aAAO,CAAC,MAAM,IAAI;AAC9B,QAAI,WAAW;AAAO,aAAO,CAAC,OAAO,KAAK;AAE1C,UAAM,WAAoC,uBAAO,OAAO,IAAI;AAC5D,UAAM,sBAAsBL,QAAA,CAAC,QAAgB;AAC3C,YAAM,SAAS,kCAAkB,CAAC,UAAU,KAAK,OAAO,GAAG,GAAG,SAAS,GAAG,CAAC;AAC3E,gCAAc;AACd,aAAO;IACT,GAJ4B,qBAAA;AAM5B,UAAM,UAAU,oBAAI,IAAY;AAChC,QAAI,YAAY,OAAO,gBAAgB;AACvC,QAAI,WAA2B,KAAK,QAAQ,cAAc;AAC1D,eAAW,EAAE,MAAM,UAAU,QAAQ,KAAK,KAAK,WAAW;AACxD,UAAI,CAAC,MAAM;AACT,gCAAa,CAAC;MAChB,WAAW,SAAS;AAClB,qCAAM,QAAQ,CAAA,QAAO,QAAQ,IAAI,GAAG;MACtC,OAAO;AACL,YAAIM,aAAY;AAChB,mBAAW,OAAO,MAAM;AACtBA,sCAAc,oBAAoB,GAAG;QACvC;AACA,YAAI,CAACA;AAAW;MAClB;AACA,YAAM,SAAS,qCAAW;AAC1B,UAAI;AAAQ,wBAAgB;IAC9B;AAEA,eAAW,OAAO,EAAE,GAAG,KAAK,QAAQ,GAAG,SAAS,GAAG;AACjD,UAAI,aAAa;AAAO;AACxB,UAAI,EAAE,OAAO,aAAa,CAAC,QAAQ,IAAI,GAAG,GAAG;AAC3C,cAAMA,aAAY,oBAAoB,GAAG;AACzC,YAAI,aAAa;AAAM,4CAAkBA;MAC3C;IACF;AACA,WAAO,CAAC,WAAW,aAAa;EAClC;AACF,GArK+DN,QAAAE,KAAA,aAAA,GAAxDA;;AAuKA,IAAM,aAANA,MAAA,cAAqD,YAAe;EAGzE,YAAY,QAAiBC,SAA4B,SAAuB;AAC9E,UAAM,QAAaA,OAAM;AAH3B;AAEyD,SAAA,UAAA;AAGvD,SAAK,UAAUC,eAAe,OAAO,MAAM,QAAQ,SAAS,OAAO,QAAQ,IAAI,KAAK,MAAM;AACxF,WAAK,MAAM;AACX,WAAK,MAAM;AACX,YAAM,SAASC,OAAO,QAAQ,aAAa,KAAK,OAAO;AACvD,UAAIA,OAAO,QAAQ,UAAU,IAAI,KAAK,CAAC,QAAQ,SAAS,QAAQ;AAC9D,eAAO,SAAS,OAAO,QAAQ,MAAM;MACvC;AACA,WAAK,QAAQ,KAAK,iBAAiB,IAAI;AACvC,aAAO;IACT,CAAC,GAAG,QAAQ,QAAQ,OAAO;AAE3B,YAAQ,SAAS,KAAK,IAAI;AAC1B,YAAQ,YAAY,KAAK,KAAK,OAAO;AACrC,SAAK,QAAQ,KAAK,iBAAiB,IAAI;AACvC,QAAI,QAAQ,YAAY;AAEtB,WAAK,MAAM;IACb;AACA,SAAK,MAAM;EACb;EAEA,QAAQ;AACN,QAAI,MAAM,MAAM;AAAG,aAAO;AAC1B,eAAW,QAAQ,KAAK,QAAQ,WAAW;AACzC,WAAK,OAAO,YAAY,KAAK,KAAK,SAAS,KAAK,OAAO,CAAC;IAC1D;EACF;EAEA,OAAOF,SAAa,QAAkB;AACpC,UAAM,YAAY,KAAK;AACvB,UAAM,QAAwB,KAAK,QAAQ,aAAa,OAAO,KAAK;AACpE,QAAI,MAAM,WAAW;AAAW;AAChC,UAAM,WAAW,cAAc,KAAK,QAAQ,QAAQA,OAAM;AAC1D,UAAM,CAAC,WAAW,aAAa,IAAI,MAAM,YAAY,UAAU,MAAM;AACrE,SAAK,QAAQ,KAAK,0BAA0B,MAAMA,OAAM;AACxD,SAAK,SAAS;AACd,UAAM,SAAS;AACf,QAAI,WAAW;AACb,WAAK,QAAQ,KAAK,mBAAmB,MAAM,SAAS;IACtD;AACA,QAAI;AAAe,YAAM,QAAQ;EACnC;AACF,GAhD2EH,QAAAE,KAAA,WAAA,GAApEA;;AAkDA,IAAM,aAANA,MAAA,cAAqD,YAAe;EASzE,YAAYK,WAA8B,QAAgBJ,SAAa;AACrE,UAAMI,UAAS,QAAQ,OAAO,GAAQJ,OAAM;AAT9C,mCAAU;AACV;AACA,iCAA2B,CAAC;AAC5B,qCAAwB,CAAC;AACzB,oCAA2B,CAAC;AAC5B,sCAAa;AACb,sCAAa;AAiDL,iCAAQ,CAAC,SAAkBA,YAAgB;AACjD,YAAM,SAAS,KAAK;AACpB,UAAI,OAAO,WAAW,YAAY;AAChC,aAAK,OAAO,YAAY,OAAO,MAAM,SAASA,OAAM,CAAC;MACvD,WAAW,cAAc,MAAM,GAAG;AAEhC,cAAM,WAAW,IAAI,OAAO,SAASA,OAAM;AAC3C,cAAM,OAAO,SAAS,QAAQ,MAAM;AACpC,YAAI,MAAM;AACR,kBAAQ,IAAI,IAAI;QAClB;AACA,YAAI,SAAS,MAAM,GAAG;AACpB,eAAK,UAAU,KAAK,SAAS,MAAM,EAAE,KAAK,QAAQ,CAAC;QACrD;MACF,OAAO;AACL,aAAK,OAAO,YAAY,OAAO,SAASA,OAAM,CAAC;MACjD;IACF;AAhE0C,SAAA,SAAA;AAExC,IAAAI,UAAS,IAAI,QAAQ,IAAI;AACzB,QAAI,QAAQ;AACV,WAAK,MAAM;IACb,OAAO;AACL,WAAK,WAAW;IAClB;EACF;EAEA,IAAI,aAAa;AACf,WAAO,KAAK,UAAU,SAAS;EACjC;EAEA,IAAI,OAAO;AACT,QAAI,CAAC,KAAK;AAAQ,aAAO;AACzB,UAAM,EAAE,KAAK,IAAI,KAAK;AACtB,WAAO,CAAC,QAAQ,SAAS,UAAU,cAAc;EACnD;EAEA,KAAK,QAAiBJ,SAAa;AACjC,WAAO,IAAI,UAAU,QAAQA,SAAQ,IAAI;EAC3C;EAEA,UAAU;AACR,SAAK,MAAM;AACX,SAAK,MAAM;AACX,SAAK,QAAQ,KAAK,oBAAoB,IAAI;AAC1C,WAAO;EACT;EAEA,QAAQ;AACN,SAAK,SAAS,KAAK,OAAO,QAAQ,KAAK,KAAK,OAAO,QAAQ;AAC3D,SAAK,QAAQ,KAAK,OAAO,OAAO,KAAK,CAAC;AACtC,SAAK,aAAa,KAAK,OAAO,UAAU;AACxC,SAAK,aAAa,KAAK,OAAO,UAAU;AACxC,SAAK,QAAQ,KAAK,oBAAoB,IAAI;AAE1C,QAAI,KAAK,YAAY;AACnB,WAAK,UAAU,KAAK,KAAK,KAAK;IAChC,OAAO;AACL,YAAM,MAAM;IACd;AAEA,SAAK,QAAQ;EACf;EAqBA,QAAQ;AACN,UAAM,MAAM;AACZ,eAAW,QAAQ,KAAK,UAAU;AAChC,WAAK,MAAM;IACb;EACF;EAEA,QAAQ;AACN,QAAI,MAAM,MAAM;AAAG,aAAO;AAC1B,QAAI,CAAC,KAAK,cAAc,KAAK,QAAQ;AACnC,WAAK,MAAM,KAAK,SAAS,KAAK,OAAO;IACvC;AACA,eAAW,QAAQ,KAAK,UAAU;AAChC,WAAK,MAAM;IACb;EACF;EAEA,OAAOA,SAAqB,QAAkB;AAC5C,QAAI,KAAK,YAAY;AACnB,WAAK,QAAQ,KAAK,oBAAoB,yCAAyC,KAAK,OAAO,IAAI,0CAA0C;IAC3I;AACA,UAAM,YAAY,KAAK;AACvB,UAAM,WAAW,cAAc,KAAK,QAAQ,UAAU,eAAe,KAAK,OAAO,GAAGA,OAAM;AAC1F,UAAM,CAAC,WAAW,aAAa,IAAI,KAAK,YAAY,UAAU,MAAM;AACpE,UAAM,QAAQ,KAAK,SAAS,KAAK,CAAA,SAAQ,KAAK,WAAW,SAAS;AAClE,SAAK,SAAS;AACd,QAAI,OAAO;AACT,WAAK,QAAQ,KAAK,0BAA0B,OAAOA,OAAM;AACzD,YAAM,SAAS;AACf,UAAI,WAAW;AACb,aAAK,QAAQ,KAAK,mBAAmB,OAAO,SAAS;MACvD;IACF;AACA,QAAI;AAAe,WAAK,QAAQ;EAClC;AACF,GA9G2EH,QAAAE,KAAA,WAAA,GAApEA;ADlPA,SAAS,aAAa,QAAgB;AAC3C,SAAO,UAAU,OAAO,WAAW,YAAY,OAAO,OAAO,UAAU;AACzE;AAFgBF,QAAA,cAAA,cAAA;;AA2CT,IAAM,YAANE,MAAA,cAAoD,IAA6B;EAKtF,YAAoBD,OAAeE,SAAyB;AAC1D,UAAM;AAHA,oCAAW;AAEC,SAAA,OAAAF;AAElBG,mBAAe,MAAM,QAAQ,SAASH,KAAI;AAC1C,IAAAA,MAAK,QAAQ,IAAI,UAAU,MAAM,MAAOE,OAAM;AAC9C,IAAAF,MAAK,MAAM,QAAQ,aAAa;EAClC;EAEA,IAAI,UAAU;AACZ,WAAO,EAAE,KAAK;EAChB;EAEA,QAAQ,QAAgB;AAEtB,QAAI,WAAW;AAAM,aAAO;AAC5B,QAAI,OAAO,WAAW;AAAY,aAAO;AACzC,QAAI,aAAa,MAAM;AAAG,aAAO,OAAO;AACxC,UAAM,IAAI,MAAM,kEAAkE;EACpF;EAEA,IAAI,QAAmB;AACrB,WAAO,MAAM,IAAI,KAAK,QAAQ,MAAM,CAAC;EACvC;EAEA,IAAI,QAAmB;AACrB,WAAO,MAAM,IAAI,KAAK,QAAQ,MAAM,CAAC;EACvC;EAEA,IAAI,QAAmB,OAAqB;AAC1C,WAAO,MAAM,IAAI,KAAK,QAAQ,MAAM,GAAG,KAAK;EAC9C;EAEA,OAAO,QAAmB;AACxB,aAAS,KAAK,QAAQ,MAAM;AAC5B,UAAM,UAAU,KAAK,IAAI,MAAM;AAC/B,QAAI,CAAC;AAAS,aAAO;AACrB,UAAM,OAAO,MAAM;AACnB,WAAO,QAAQ,QAAQ;EACzB;EAEA,MAAM,OAA0B,UAAoC;AAClE,WAAO,KAAK,OAAO,EAAE,OAAO,OAAO,UAAU,MAAM,SAAS,KAAK,CAAC;EACpE;EAEA,OAAO,QAAmBE,SAAc;AAEtC,SAAK,QAAQ,MAAM;AAGnB,IAAAA,UAAS,cAAc,QAAQA,OAAM;AACrC,QAAI,CAACA;AAAQ;AAGb,UAAM,UAAU,KAAK,QAAQ,OAAO;AACpC,QAAI,UAAU,KAAK,IAAI,MAAM;AAC7B,QAAI,SAAS;AACX,UAAI,CAAC,QAAQ,YAAY;AACvB,aAAK,KAAK,KAAK,oBAAoB,8BAA8B,OAAO,IAAI,EAAE;MAChF;AACA,aAAO,QAAQ,KAAK,SAASA,OAAM;IACrC;AAEA,cAAU,IAAI,UAAU,MAAM,QAAQA,OAAM;AAC5C,WAAO,QAAQ,KAAK,SAASA,OAAM;EACrC;EAEA,QAAQ,QAAmB;AACzB,WAAO,KAAK,OAAO,MAAM;EAC3B;AACF,GAzEwFH,QAAAE,KAAA,UAAA,GACtF,cADKA,KACW,WAAU,CAAC,SAAS,UAAU,SAAS,IADlDA;;AFlCA,IAAM,WAANA,MAAA,MAAc;EAUnB,YAAYC,SAAyB;AACnC,UAAM,UAAU,cAAc,eAAe,IAAI,GAAGA,OAAM;AAC1D,UAAM,SAASH,QAAA,CAAC,aAAiB;AAC/B,UAAI,CAAC;AAAU;AACf,aAAO,OAAO,eAAe,QAAQ,CAAC;AACtC,iBAAW,OAAO,OAAO,sBAAsB,QAAQ,GAAG;AACxD,cAAM,cAAc,SAAS,GAAG;AAChC,cAAM,OAAO,YAAYE,IAAQ,MAAM;AACvC,aAAK,GAAG,IAAI,IAAI,YAAY,MAAM,OAAO,mCAAU,QAAQ,OAAO;MACpE;IACF,GARe,QAAA;AAUf,SAAK,OAAO;AACZ,SAAK,UAAU,uBAAO,OAAO,IAAI;AACjC,WAAO,KAAKA,IAAQ,QAAQ,CAAC;EAC/B;EAEA,CAAC,OAAO,IAAI,4BAA4B,CAAC,IAAI;AAC3C,WAAO,YAAY,KAAK,QAAQ,IAAI;EACtC;EAEA,IAAI,SAAS;AACX,WAAO,KAAK;EACd;;EAGA,IAAI,QAAQ;AACV,WAAO,KAAK;EACd;EAEA,OAAO,OAAO,CAAC,GAAS;AACtB,WAAO,OAAO,OAAO,OAAO,OAAO,IAAI,GAAG,IAAI;EAChD;EAEA,QAAQ,OAAiB;AACvB,UAAM,UAAU,OAAO,OAAO,KAAK,OAAO;AAC1C,eAAW,QAAQ,OAAO;AACxB,cAAQ,IAAI,IAAI,OAAO,IAAI;IAC7B;AACA,WAAO,KAAK,OAAO,EAAE,QAAQ,CAAC;EAChC;AACF,GAnDqBF,QAAAE,KAAA,SAAA,GACnB,cADKA,KACW,UAAS,OAAO,QAAQ,IACxC,cAFKA,KAEW,UAAS,OAAO,QAAQ,IACxC,cAHKA,KAGW,UAAS,OAAO,QAAQ,IACxC,cAJKA,KAIW,UAAS,OAAO,QAAQ,IACxC,cALKA,KAKW,UAAS,OAAO,QAAQ,IACxC,cANKA,KAMW,UAAS,OAAO,QAAQ,IACxC,cAPKA,KAOW,WAAU,OAAO,SAAS,IAC1C,cARKA,KAQW,YAAW,OAAO,UAAU,IARvCA;CAqDA,CAAUM,cAAV;AAUE,WAAS,MAAM,MAAiB,SAAuB;AAC5D,eAAW,OAAO,QAAQ,WAAW,CAAC,GAAG;AACvC,YAAM,SAASJ,eAAe,YAA4B,MAAa;AACrE,eAAO,KAAK,IAAI,EAAE,GAAG,EAAE,GAAG,IAAI;MAChC,GAAG,QAAQ,GAAG;AACdA,qBAAe,KAAK,WAAW,KAAK,MAAM;IAC5C;AAEA,eAAW,OAAO,QAAQ,cAAc,CAAC,GAAG;AAC1C,aAAO,eAAe,KAAK,WAAW,KAAK;QACzC,cAAc;QACd,MAAmB;AACjB,iBAAO,KAAK,IAAI,EAAE,GAAG;QACvB;QACA,IAAmB,OAAY;AAC7B,eAAK,IAAI,EAAE,GAAG,IAAI;QACpB;MACF,CAAC;IACH;EACF;AAnBOI,EAAAA,UAAS,QAAA;AAAA,EAAAR,QAAA,OAAA,OAAA;AAyBT,WAAS,QAAQ,MAAiB,UAA0B,CAAC,GAAG;AACrE,QAAI,OAAO,UAAU,eAAe,KAAK,KAAK,WAAW,IAAI;AAAG;AAChE,UAAM,aAAa,OAAO,SAAS,WAAW,OAAO,OAAO,IAAI;AAEhE,WAAO,eAAe,KAAK,WAAW,MAAM;MAC1C,cAAc;MACd,MAAmB;AACjB,cAAM,MAAM,KAAK,QAAQ,IAAW,KAAK;AACzC,cAAM,QAAQ,KAAK,KAAK,GAAG;AAC3B,YAAI,CAAC;AAAO;AACZI,uBAAe,OAAOI,UAAQ,SAAS,IAAI;AAC3C,eAAO;MACT;MACA,IAAmB,OAAO;AACxB,cAAM,MAAM,KAAK,QAAQ,IAAI,KAAK;AAClC,cAAM,WAAW,KAAK,KAAK,GAAG;AAC9B,YAAI,aAAa;AAAO;AAGxB,cAAM,OAAO,uBAAO,OAAO,IAAI;AAC/B,aAAKA,UAAQ,MAAM,IAAI,CAAC,QAAiB;AACvC,iBAAO,KAAK,QAAQ,IAAI,MAAM,IAAI,QAAQ,IAAI;QAChD;AAGA,YAAI,SAAS,YAAY,OAAO,SAAS,UAAU;AACjD,gBAAM,IAAI,MAAM,WAAW,IAAI,sBAAsB;QACvD;AAEA,YAAI,OAAO,SAAS,UAAU;AAC5B,eAAK,KAAK,MAAM,2BAA2B,MAAM,KAAK;QACxD;AACA,aAAK,KAAK,GAAG,IAAI;AACjB,YAAI,SAAS,OAAO,UAAU,UAAU;AACtCJ,yBAAe,OAAOI,UAAQ,QAAQ,IAAI;QAC5C;AACA,YAAI,OAAO,SAAS,UAAU;AAC5B,eAAK,KAAK,MAAM,oBAAoB,MAAM,QAAQ;QACpD;MACF;IACF,CAAC;AAED,QAAI,cAAc,OAAO,GAAG;AAC1B,YAAM,WAAW,eAAe,KAAK,SAAS;AAC9C,eAAS,UAAU,IAAI;IACzB;AAEA,SAAK,MAAM,MAAM,OAAO;EAC1B;AAhDOA,EAAAA,UAAS,UAAA;AAAA,EAAAR,QAAA,SAAA,SAAA;AAkDhB,WAAS,eAAe,WAAe;AACrC,QAAI,OAAO,UAAU,eAAe,KAAK,WAAWQ,UAAQ,QAAQ,GAAG;AACrE,aAAO,UAAUA,UAAQ,QAAQ;IACnC;AACA,UAAM,SAAS,eAAe,OAAO,eAAe,SAAS,CAAC;AAC9D,WAAO,UAAUA,UAAQ,QAAQ,IAAI,OAAO,OAAO,MAAM;EAC3D;AANS,EAAAR,QAAA,gBAAA,gBAAA;AAAA,GArFM,YAAA,UAAA,CAAA,EAAA;AA8FjB,QAAQ,UAAU,QAAQ,QAAQ,IAAI,uBAAO,OAAO,IAAI;AAExD,QAAQ,QAAQ,YAAY,QAAQ;AACpC,QAAQ,QAAQ,aAAa,SAAS;AAEtC,QAAQ,MAAM,SAAS;EACrB,YAAY,CAAC,UAAU,SAAS;EAChC,SAAS,CAAC,WAAW,UAAU,SAAS;AAC1C,CAAC;;AKrKM,IAAM,WAANE,MAAA,MAA2C;EAKhD,YAAsB,KAAQ,MAAc,WAAqB;AAA3C,SAAA,MAAA;AACpB,mBAAe,IAAI,IAAI,EAAE,QAAQ,IAAI;AACrCE,mBAAe,MAAM,QAAQ,SAAS,GAAG;AAEzC,QAAI,WAAW;AACb,WAAK,QAAQ,MAAM,IAAI;IACzB;AAEA,QAAI,GAAG,SAAS,YAAY;AAE1B,YAAM,QAAQ,QAAQ;AACtB,YAAM,KAAK,MAAM;AACjB,UAAI,IAAI,IAAI;IACd,CAAC;AAED,QAAI,GAAG,WAAW,YAAY;AAC5B,UAAI,IAAI,IAAI;AACZ,YAAM,KAAK,KAAK;IAClB,CAAC;EACH;EAvBU,QAAyB;EAAC;EAC1B,OAAwB;EAAC;EAwBnC,IAAI,SAAS;AACX,WAAO,KAAK,QAAQ,OAAO;EAC7B;AACF,GA7BkDJ,QAAAE,KAAA,SAAA,GAA3CA;;;ACyBA,IAAM,aAAa,SAAyB,CAAC,CAAC;AAIrD,SAAS,cAAc,MAAc;AACnC,SAAO,KAAK,MAAM,GAAG,EAAE,KAAK,OAAO,KAAK;AAC1C;AAEO,IAAM,WAAN,MAAe;AAAA,EAIpB,YAAmB,KAAqB,SAA2B;AAAhD;AAAqB;AAHxC;AACA,wCAA6B,CAAC;AAG5B,YAAQ,UAAR,QAAQ,QAAU;AAClB,YAAQ,aAAR,QAAQ,WAAa;AACrB,WAAO,OAAO,MAAM,KAAK,SAAS,CAAC,QAAQ,QAAQ,QAAQ,UAAU,CAAC,CAAC;AACvE,UAAM,EAAE,MAAM,KAAK,cAAc,IAAI,GAAG,UAAU,IAAI;AACtD,SAAK,aAAa,KAAK,OAAO,SAAS,EAAE,MAAM,MAAM,IAAI,WAAW,MAAM,EAAE,UAAU,KAAK,EAAE,CAAC,CAAC;AAC/F,SAAK,OAAL,KAAK,KAAO;AACZ,SAAK,aAAa;AAClB,SAAK,cAAL,KAAK,YAAc;AACnB,SAAK,WAAL,KAAK,SAAW,CAAC;AACjB,eAAW,KAAK,EAAE,IAAI;AAAA,EACxB;AAAA,EAEA,eAAe;AACb,UAAM,EAAE,SAAS,IAAI,OAAO,aAAa,MAAM;AAC/C,QAAI,OAAO,aAAa,UAAU;AAChC,YAAMO,YAAW,OAAO,QAAQ,QAAQ;AACxC,UAAIA,UAAS,QAAQ,QAAQ;AAC3B,eAAO,QAAQA,SAAQ;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,IAAI,OAAO;AACT,WAAOC,SAAQ,KAAK,QAAQ,QAAQ,kBAAkB;AAAA,EACxD;AAAA,EAEA,IAAI,OAAO;AACT,WAAOA,SAAQ,KAAK,QAAQ,QAAQ,KAAK,EAAE;AAAA,EAC7C;AAAA,EAEA,IAAI,OAAO;AACT,WAAOA,SAAQ,KAAK,QAAQ,IAAI;AAAA,EAClC;AAAA,EAEA,WAAW;AA5Eb,QAAAC,KAAA;AA6EI,QAAI,KAAK,KAAK,YAAY,IAAI;AAAG,aAAO;AACxC,QAAI,CAAC,KAAK,OAAO,MAAM,SAAO,MAAM,GAAG,CAAC;AAAG,aAAO;AAClD,QAAI,KAAK,QAAQ,CAAC,KAAK,KAAK;AAAG,aAAO;AACtC,SAAI,MAAAA,MAAA,KAAK,SAAQ,aAAb,wBAAAA;AAA2B,aAAO;AAAA,EACxC;AAAA,EAEA,UAAU;AAnFZ,QAAAA;AAoFI,SAAK,aAAa,QAAQ,aAAW,QAAQ,CAAC;AAC9C,UAAM,UAAU,OAAO,aAAa;AACpC,UAAIA,MAAA,mCAAS,SAAT,gBAAAA,IAAe,cAAa,MAAM;AACpC,aAAO,KAAK;AAAA,QACV,MAAM;AAAA,QACN,OAAO,EAAE,UAAU,QAAQ,SAAS;AAAA,MACtC,CAAC;AAAA,IACH;AACA,WAAO,OAAO,WAAW,KAAK,EAAE;AAAA,EAClC;AACF;;;AC1FO,IAAI,aAAa,CAAmB,KAAa,SAAiB,aAAwC;AAC/G,QAAM,UAAU,WAAW,SAAS,IAAI,CAAC;AACzC,UAAQ,aAAa,IAAI;AACzB,QAAM,UAAU,gBAAgB,oBAAoB,KAAK,OAAO;AAChE,MAAI,QAAQ,MAAM,aAAa,MAAM,SAAS;AAC5C,YAAQ,QAAQ;AAAA,EAClB;AACA,SAAO;AACT;AAEO,SAAS,eAAe,SAA4B;AACzD,eAAa;AACf;AAOO,SAAS,cAAgC,KAAa,SAAiB,UAAoB;AAChG,QAAM,UAAU,gBAAgB,oBAAoB,KAAK,CAAC,CAAmB;AAC7E,QAAM,UAAU,WAAW,SAAS,IAAI,CAAC;AACzC,MAAI,QAAQ,MAAM,YAAY,SAAS;AACrC,YAAQ,QAAQ,EAAE,SAAS,MAAM,QAAQ;AAAA,EAC3C,WAAW,CAAC,MAAM,QAAQ,QAAQ,MAAM,IAAI,GAAG;AAC7C,YAAQ,MAAM,OAAO,EAAE,GAAG,SAAS,GAAG,QAAQ,MAAM,KAAK;AAAA,EAC3D;AACA,SAAO,SAAY,QAAQ,MAAM,MAAM,CAAC;AAC1C;AAEO,IAAM,SAAS,WAAmB,UAAU,QAAW,OAAO;AAAA,EACnE,OAAO;AAAA,IACL,MAAM;AAAA,IACN,MAAM;AAAA,IACN,OAAO;AAAA,EACT;AAAA,EACA,QAAQ;AACV,EAAE;AAEF,IAAM,aAAa,iBAAiB;AAEpC,IAAM,OAAO,SAAS,MAAM;AAC1B,QAAMC,QAAO,OAAO,MAAM,MAAM;AAChC,MAAIA,UAAS;AAAQ,WAAOA;AAC5B,SAAO,WAAW,QAAQ,SAAS;AACrC,CAAC;AAEM,IAAM,YAAY,MAAM;AACxB,IAAM,eAAe,MAAM;AAElC,YAAY,MAAM;AAChB,QAAMC,QAAO,OAAO,SAAS,cAAc,MAAM;AACjD,EAAAA,MAAK,aAAa,SAAS,OAAO,MAAM,MAAM,KAAK,KAAK,CAAC;AACzD,MAAI,KAAK,UAAU,QAAQ;AACzB,IAAAA,MAAK,UAAU,IAAI,MAAM;AAAA,EAC3B,OAAO;AACL,IAAAA,MAAK,UAAU,OAAO,MAAM;AAAA,EAC9B;AACF,GAAG,EAAE,OAAO,OAAO,CAAC;;;ACvDb,SAAS,gBAAgB,UAAqB;AACnD,SAAO;AACT;AAEO,SAAS,cAAc,QAAa;AACzC,UAAO,iCAAQ,YAAW;AAC5B;AAEA,IAAM,UAA8D;AAAA,EAClE,OAAO,MAAM,EAAE,KAAK,KAAK;AACvB,UAAM,OAAO,SAAS,cAAc,MAAM;AAC1C,SAAK,MAAM;AACX,SAAK,OAAO;AACZ,UAAM,IAAI,QAAQ,CAAC,SAAS,WAAW;AACrC,WAAK,SAAS;AACd,WAAK,UAAU;AACf,eAAS,KAAK,YAAY,IAAI;AAC9B,UAAI,GAAG,WAAW,MAAM;AACtB,iBAAS,KAAK,YAAY,IAAI;AAAA,MAChC,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAAA,EACA,OAAO,EAAE,EAAE,KAAK,KAAK;AACnB,UAAM,UAAU,MAAM;AAAA;AAAA,MAA0B;AAAA;AAChD,QAAI,OAAO,cAAc,OAAO,CAAC;AAAA,EACnC;AACF;AAQO,IAAM,aAA+B,SAAS,CAAC,CAAC;AAEhD,IAAM,WAAW,IAAI,QAAc,CAAC,YAAY;AACrD,QAAM,MAAM,MAAM,OAAO,OAAO,UAAU,aAAa;AACrD,4BAAa,CAAC;AACd,eAAW,OAAO,YAAY;AAC5B,UAAI,SAAS,GAAG;AAAG;AACnB,iBAAW,GAAG,EAAE,MAAM,QAAQ;AAC9B,aAAO,WAAW,GAAG;AAAA,IACvB;AAEA,UAAM,QAAQ,IAAI,OAAO,QAAQ,QAAQ,EAAE,IAAI,CAAC,CAAC,KAAK,EAAE,OAAO,MAAM,CAAC,MAAM;AAC1E,UAAI,WAAW,GAAG;AAAG;AACrB,YAAM,QAAQ,KAAK,OAAO,MAAM;AAAA,MAAC,CAAC;AAClC,YAAM,IAAI,YAAY,WAAW,GAAG,IAAI,EAAE,MAAM,OAAO,OAAO,MAAM;AACpE,YAAM,OAAO,QAAQ,IAAI,MAAM,IAAI,CAAC,QAAQ;AAC1C,mBAAW,OAAO,SAAS;AACzB,cAAI,CAAC,IAAI,SAAS,GAAG;AAAG;AACxB,iBAAO,QAAQ,GAAG,EAAE,MAAM,KAAK,GAAG;AAAA,QACpC;AAAA,MACF,CAAC,CAAC;AACF,WAAK,QAAQ,MAAM,WAAW,GAAG,EAAE,OAAO,IAAI;AAAA,IAChD,CAAC,CAAC;AAEF,QAAI,CAAC,UAAU;AACb,cAAQ;AACR,UAAI,CAAC,KAAK,OAAO;AAAU,aAAK,MAAM;AAAA,IACxC;AAAA,EACF,GAAG,EAAE,MAAM,KAAK,CAAC;AACnB,CAAC;;;AC5CM,IAAMC,WAAiB;AAE9B,IAAMC,UAAS,UAAU;AACzB,IAAMC,QAAO,aAAa;AAoBnB,SAAS,aAAa;AAC3B,QAAM,SAAS,OAAO,QAAQ;AAC9B,QAAM,OAAO,OAAO,OAAO,MAAM;AAAA,EAAC,CAAC;AACnC,kBAAgB,MAAM,KAAK,QAAQ,CAAC;AACpC,SAAO,KAAK;AACd;AA6BA,SAAS,OAA0B,MAAW,MAAS;AACrD,UAAQ,IAAI;AACZ,QAAM,QAAQ,KAAK,UAAU,OAAK,EAAE,QAAQ,KAAK,KAAK;AACtD,MAAI,SAAS,GAAG;AACd,SAAK,OAAO,OAAO,GAAG,IAAI;AAAA,EAC5B,OAAO;AACL,SAAK,KAAK,IAAI;AAAA,EAChB;AACF;AAUA,IAAM,WAAN,MAAe;AAAA,EAAf;AACE,sCAAa;AACb,sCAAa;AACb,sCAAa;AACb,iCAAQ,gBAAsC,CAAC,CAAC;AAChD,iCAAQ,SAA2B,CAAC,CAAC;AACrC,mCAAU,SAA8B,CAAC,CAAC;AAC1C,iCAAQ,SAA8B,CAAC,CAAC;AACxC,kCAAS,SAA6B,CAAC,CAAC;AACxC,oCAAW,SAAiC,CAAC,CAAC;AAC9C,uCAAc,SAAiE,CAAC,CAAC;AAAA;AAAA,EAEjF,YAAY,SAAS,IAAI;AACvB,WAAO,IAAI,MAAM,CAAC,GAAG;AAAA,MACnB,KAAK,CAAC,QAAQ,QAAQ;AACpB,YAAI,OAAO,QAAQ;AAAU,iBAAO,OAAO,GAAG;AAC9C,cAAM,SAAS;AACf,YAAI,OAAO,KAAK;AAAO,iBAAO,QAAQ,KAAK,MAAM,GAAG,CAAC;AACrD,cAAM,UAAU,MAAM;AACtB,YAAI,OAAO,KAAK,KAAK,KAAK,EAAE,KAAK,OAAK,EAAE,WAAW,OAAO,CAAC,GAAG;AAC5D,iBAAO,KAAK,YAAY,MAAM,GAAG;AAAA,QACnC;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AACF;AAEO,SAAS,QAAuC,IAAO;AAC5D,QAAM,MAAM,WAAW;AACvB,SAAO,CAAC,OAAmB,UAA8C;AACvE,QAAI,OAAO,IAAI,KAAK;AACpB,UAAM,eAAe;AACrB,UAAM,EAAE,SAAS,QAAQ,IAAI;AAC7B,QAAI,SAAS,YAAY,OAAO,GAAG,UAAU,EAAE,IAAI,QAAQ,EAAE,MAAM,UAAU,MAAM,KAAK,UAAU,KAAK,EAAE,CAAC;AAAA,EAC5G;AACF;AAEO,IAAM,aAAa,SAAoC,CAAC,CAAC;AAEzD,IAAMC,WAAN,MAAM,iBAAuB,QAAQ;AAAA,EAK1C,cAAc;AACZ,UAAM;AALR;AACA;AACA,oCAAW,IAAI,SAAS;AAItB,SAAK,MAAM,UAAU,gBAAgB;AAAA,MACnC,QAAQ;AACN,eAAO,MAAM;AAAA,UACX,EAAE,iBAAiB,QAAQ,GAAG,EAAE,MAAM,QAAQ,QAAQ,KAAK,CAAC;AAAA,UAC5D,EAAE,iBAAiB,QAAQ,GAAG,EAAE,MAAM,SAAS,CAAC;AAAA,QAClD;AAAA,MACF;AAAA,IACF,CAAC,CAAC;AACF,SAAK,IAAI,QAAQ,UAAU,IAAI;AAAA,EACjC;AAAA,EAEA,cAAc,WAAsB;AAClC,QAAI,CAAC;AAAW;AAChB,UAAM,SAAS,KAAK,SAAQ,OAAO,KAAK;AACxC,WAAO,gBAAgB,CAAC,OAAO,EAAE,MAAM,MAAM;AAC3C,cAAQ,UAAU,MAAM;AACxB,aAAO,MAAM,EAAE,WAAW,OAAO,KAAK;AAAA,IACxC,CAAC;AAAA,EACH;AAAA;AAAA,EAGA,QAAQ,SAAsB;AAC5B,WAAO,KAAK,KAAK,OAAO;AAAA,EAC1B;AAAA;AAAA,EAGA,QAAQ,SAA2B;AACjC,WAAO,KAAK,KAAK,OAAO;AAAA,EAC1B;AAAA,EAEA,KAAK,SAAsB;AAjL7B,QAAAC,KAAA;AAkLI,YAAQ,UAAR,QAAQ,QAAU;AAClB,YAAQ,YAAY,KAAK,cAAc,QAAQ,SAAS;AACxD,QAAI,QAAQ;AAAM,cAAQ,WAAW,MAAM,CAAC,QAAQ,KAAK;AACzD,UAAM,QAAOA,MAAA,KAAK,SAAS,OAAd,KAAoB,QAAQ,UAA5BA,IAAA,MAAsC,CAAC;AACpD,WAAO,MAAM,OAAO;AACpB,WAAO,KAAK,MAAM,QAAQ,QAAQ,MAAM,OAAO,MAAM,OAAO,CAAC;AAAA,EAC/D;AAAA,EAEA,KAAK,SAA2B;AAC9B,YAAQ,YAAY,KAAK,cAAc,QAAQ,SAAS;AACxD,UAAM,WAAW,IAAI,SAAS,MAAM,OAAO;AAC3C,WAAO,KAAK,MAAM,QAAQ,QAAQ,MAAM,SAAS,QAAQ,CAAC;AAAA,EAC5D;AAAA,EAEA,OAAO,WAAiC;AACtC,gBAAW,WAAW,IAAI,SAAS;AACnC,cAAU,YAAY,KAAK,cAAc,UAAU,SAAS;AAC5D,WAAO,KAAK,MAAM,QAAQ,UAAU,MAAM,YAAW,WAAW,OAAO,SAAS,CAAC;AAAA,EACnF;AAAA,EAEA,OAAO,IAAY,SAAwB;AACzC,YAAQ,OAAO;AACf,SAAK,SAAS,QAAQ,EAAE,IAAI;AAC5B,WAAO,KAAK,MAAM,QAAQ,WAAW,MAAM,OAAO,KAAK,SAAS,QAAQ,EAAE,CAAC;AAAA,EAC7E;AAAA,EAEA,KAAK,IAAY,OAAmB;AA5MtC,QAAAA;AA6MI,UAAM,QAAOA,MAAA,KAAK,SAAS,OAAd,QAAAA,IAAA,MAA4B,CAAC;AAC1C,UAAM,QAAQ,UAAQ,OAAO,MAAM,IAAI,CAAC;AACxC,WAAO,KAAK,MAAM,QAAQ,SAAS,MAAM;AACvC,YAAM,QAAQ,UAAQ,OAAO,MAAM,IAAI,CAAC;AACxC,aAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,OAAsC,KAAQ,OAA2C;AACvF,SAAK,SAAS,MAAM,GAAG,IAAI;AAC3B,WAAO,KAAK,MAAM,QAAQ,YAAY,MAAM,OAAO,KAAK,SAAS,MAAM,GAAG,CAAC;AAAA,EAC7E;AAAA,EAEA,SAAS,SAAyB;AA1NpC,QAAAA,KAAA;AA2NI,YAAQ,OAAO;AACf,YAAQ,UAAR,QAAQ,QAAU;AAClB,YAAQ,YAAY,KAAK,cAAc,QAAQ,SAAS;AACxD,UAAM,QAAOA,MAAA,KAAK,SAAS,UAAd,KAAuB,QAAQ,QAA/BA,IAAA,MAAuC,CAAC;AACrD,WAAO,MAAM,OAAO;AACpB,QAAI,QAAQ,QAAQ;AAClB,UAAI;AACF,gBAAQ,OAAOH,QAAO,OAAO,EAAE,SAAS,KAAK,CAAC;AAAA,MAChD,SAAS,OAAO;AACd,gBAAQ,MAAM,KAAK;AAAA,MACrB;AAAA,IACF;AACA,WAAO,KAAK,MAAM,QAAQ,YAAY,MAAM,OAAO,MAAM,OAAO,CAAC;AAAA,EACnE;AAAA,EAEA,MAAM,SAAuB;AAC3B,YAAQ,OAAO;AACf,SAAK,SAAS,OAAO,QAAQ,EAAE,IAAI;AACnC,eAAW,CAAC,MAAM,SAAS,KAAK,OAAO,QAAQ,QAAQ,cAAc,CAAC,CAAC,GAAG;AACxE,WAAK,KAAK;AAAA,QACR;AAAA,QACA,UAAU,MAAMA,QAAO,MAAM,MAAMC,MAAK,KAAK,MAAM,QAAQ;AAAA,QAC3D;AAAA,MACF,CAAC;AAAA,IACH;AACA,WAAO,KAAK,MAAM,QAAQ,QAAQ,MAAM,OAAO,KAAK,SAAS,OAAO,QAAQ,EAAE,CAAC;AAAA,EACjF;AACF;AAEA,QAAe,QAAQ,SAAS;AAChC,QAAe,YAAY,SAAS;;;ACrPpC,IAAM,gBAAgB,gBAAgB;AAAA,EACpC,OAAO;AAAA,IACL,IAAI;AAAA,EACN;AAAA,EACA,MAAM,OAAO,EAAE,MAAM,GAAG;AACtB,UAAM,MAAM,WAAW;AACvB,WAAO,MAAM;AACX,YAAM,WAAW,IAAI,SAAS,WAAW,MAAM,EAAE;AACjD,aAAO,EAAE,YAAY;AAAA,QACnB,IAAI,IAAI,SAAS,WAAW,qCAAU,EAAE,MAAK,qCAAU,KAAK,QAAQ,OAAO;AAAA,MAC7E,GAAG;AAAA,QACD,SAAS,MAAG;AAfpB,cAAAG;AAeuB,mBAAAA,MAAA,MAAM,YAAN,gBAAAA,IAAA,iBAAqB,qCAAU;AAAA;AAAA,MAChD,CAAC;AAAA,IACH;AAAA,EACF;AACF,CAAC;AAEc,SAAR,aAAkB,KAAU;AACjC,MAAI,UAAU,mBAAmB,aAAa;AAChD;;;ACRO,IAAM,QAAQ,gBAAgB;AAAA,EACnC,OAAO;AAAA,IACL,MAAM;AAAA,IACN,MAAM;AAAA,IACN,QAAQ;AAAA,EACV;AAAA,EACA,MAAM,OAAO,EAAE,MAAM,GAAG;AACtB,UAAM,MAAM,WAAW;AACvB,WAAO,MAAM;AAvBjB,UAAAC,KAAA;AAwBM,YAAM,WAAW,MAAM,SAAS,CAAC,IAAI,CAAC,KAAGA,MAAA,MAAM,YAAN,gBAAAA,IAAA,gBAAqB,CAAC,CAAC,EAC7D,OAAO,UAAQ,KAAK,SAAS,SAAS,EACtC,IAAI,UAAK;AA1BlB,YAAAA;AA0BsB,iBAAE,MAAM,SAAOA,MAAA,KAAK,UAAL,gBAAAA,IAAY,UAAS,EAAE;AAAA,OAAE;AACxD,YAAM,WAAW,CAAC,GAAG,IAAI,SAAS,MAAM,MAAM,IAAI,KAAK,CAAC,CAAC,EACtD,OAAO,UAAK;AA5BrB,YAAAA;AA4BwB,kBAACA,MAAA,KAAK,aAAL,gBAAAA,IAAA;AAAA,OAAiB,EACjC,IAAI,WAAS;AAAA,QACZ,MAAM,EAAE,KAAK,WAAW,EAAE,MAAM,MAAM,MAAM,GAAG,MAAM,KAAK,GAAG,KAAK;AAAA,QAClE,OAAO,KAAK;AAAA,QACZ,OAAO;AAAA,MACT,EAAE;AACJ,YAAM,WAAW,CAAC,GAAG,UAAU,GAAG,QAAQ,EAAE,KAAK,CAAC,GAAG,MAAM,EAAE,QAAQ,EAAE,KAAK;AAC5E,UAAI,MAAM,QAAQ;AAChB,iBAAO,cAAS,CAAC,MAAV,mBAAa,WAAQ,WAAM,YAAN;AAAA,MAC9B;AACA,aAAO,SAAS,IAAI,UAAQ,KAAK,IAAI;AAAA,IACvC;AAAA,EACF;AACF,CAAC;AAED,IAAM,YAAY,gBAAgB;AAAA,EAChC,OAAO;AAAA,IACL,OAAO;AAAA,EACT;AAAA,EACA,MAAM,OAAO,EAAE,MAAM,GAAG;AACtB,WAAO,MAAG;AAhDd,UAAAA;AAgDiB,cAAAA,MAAA,MAAM,YAAN,gBAAAA,IAAA;AAAA;AAAA,EACf;AACF,CAAC;AAED,SAAS,oBAAoB,MAAc;AACzC,SAAO,gBAAgB;AAAA,IACrB,cAAc;AAAA,IACd,MAAM,GAAG,EAAE,OAAO,MAAM,GAAG;AACzB,aAAO,MAAM,EAAE,OAAO,EAAE,MAAM,MAAM,OAAO,QAAQ,KAAK,GAAG,KAAK;AAAA,IAClE;AAAA,EACF,CAAC;AACH;AAEA,IAAO,eAAQ,CAAC,QAAa;AAC3B,MAAI,UAAU,UAAU,KAAK;AAC7B,MAAI,UAAU,eAAe,SAAS;AACtC,MAAI,UAAU,YAAY,oBAAoB,QAAQ,CAAC;AACvD,MAAI,UAAU,YAAY,oBAAoB,QAAQ,CAAC;AACzD;;;AdrDA,OAAO;AAEA,IAAM,UAAU,UAAU;AAC1B,IAAM,UAAU;AAChB,IAAM,aAAa;AAY1B,YAAW,WAAW,IAAI;AAAA,EACxB,MAAM;AAAA,EACN,MAAM;AAAA,EACN,WAAW;AACb,CAAC;AAEc,SAAR,mBAAkB,KAAU;AACjC,MAAI,IAAI,SAAO;AACf,MAAI,UAAU,cAAcC,YAAQ;AAEpC,MAAI,IAAI,cAAM;AACd,MAAI,IAAI,cAAU;AAClB,MAAI,IAAI,aAAK;AACb,MAAI,IAAI,cAAM;AACd,MAAI,IAAI,YAAI;AACZ,MAAI,IAAI,YAAI;AACd;;;Ae1CA,OAAO,aAAa;;;ACIb,IAAUC;AAAA,CAAV,CAAUA,UAAV;AACE,WAAS,OAAO,QAAkB,SAA2B,CAAC,GAAG;AACtE,WAAO,gBAAgB;AAAA,MACrB,QAAQ,MAAM,OAAO,MAAM,SAAO,MAAM,GAAG,CAAC,IAAI,OAAO,IAAI;AAAA,IAC7D,CAAC;AAAA,EACH;AAJO,EAAAA,MAAS;AAcT,WAAS,QAAQ,EAAE,MAAM,MAAM,QAAQ,OAAO,QAAQ,GAAmB;AAC9E,QAAI,CAAC,MAAM;AACT,aAAO,gBAAgB,MAAM,MAAM;AACjC,YAAI,CAAC,OAAO,MAAM,SAAO,MAAM,GAAG,CAAC;AAAG;AACtC,eAAO,EAAE,iBAAiB,WAAW,GAAG,EAAE,MAAM,MAAM,GAAG,MAAM,QAAQ,KAAK,CAAC;AAAA,MAC/E,CAAC;AAAA,IACH;AAEA,WAAO,gBAAgB,MAAM,MAAM;AACjC,UAAI,CAAC,OAAO,MAAM,SAAO,MAAM,GAAG,CAAC;AAAG;AACtC,UAAI,QAAQ,QAAQ,KAAK;AACzB,UAAI,WAAW,KAAK;AAAG;AACvB,UAAI,SAAS,QAAQ;AACnB,YAAI,UAAU,KAAK,MAAM,KAAM;AAC7B,mBAAS,SAAS,KAAK,KAAK,QAAQ,CAAC,IAAI;AAAA,QAC3C,WAAW,UAAU,KAAK,MAAM,KAAM;AACpC,mBAAS,SAAS,KAAK,KAAK,QAAQ,CAAC,IAAI;AAAA,QAC3C,OAAO;AACL,mBAAS,SAAS,KAAK,KAAK,QAAQ,CAAC,IAAI;AAAA,QAC3C;AAAA,MACF;AACA,aAAO,EAAE,iBAAiB,WAAW,GAAG,EAAE,MAAM,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC;AAAA,IACxE,CAAC;AAAA,EACH;AAvBO,EAAAA,MAAS;AAAA,GAfDA,kBAAA;;;ADkBjB,IAAOC,kBAAQ;AAiBR,IAAM,OAAO,IAAIC,SAAQ;AAEzB,IAAM,SAAS,aAAa;AAAA,EACjC,SAAS,iBAAiB,OAAO,MAAM;AAAA,EACvC,iBAAiB;AAAA,EACjB,QAAQ,CAAC;AACX,CAAC;AAED,OAAO,UAAU,CAAC,UAAU;AAlD5B,MAAAC;AAmDE,QAAM,EAAE,MAAM,SAAS,IAAI,OAAO,aAAa;AAC/C,aAAW,IAAI,IAAI;AACnB,MAAI,MAAM,KAAK,UAAU;AACvB,aAAS,QAAQ,GAAG,MAAM,KAAK,SAAS,IAAI,QAAMA,MAAA,OAAO,aAAP,gBAAAA,IAAiB,UAAS,YAAY;AAAA,EAC1F;AACF,CAAC;AAEM,IAAM,OAAO,WAAW;AAAA,EAC7B,QAAQ;AAAA,EACR,gBAAgB;AAClB,CAAC;AAED,YAAY,MAAM;AAChB,OAAK,OAAO,OAAO,QAAQ,OAAO,MAAM;AAC1C,CAAC;AAED,KAAK,IAAI,IAAI,kBAAO;AACpB,KAAK,IAAI,IAAI,IAAI;AACjB,KAAK,IAAI,IAAI,MAAM;AAEnB,KAAK,KAAK;AAAA,EACR,MAAM;AAAA,EACN,WAAW;AACb,CAAC;AAED,KAAK,GAAG,YAAY,UAAQ,CAAC,IAAI;AAEjC,OAAO,WAAW,OAAO,IAAI,SAAS;AACpC,MAAI,GAAG,QAAQ;AAAQ;AAEvB,MAAI,SAAS,2BAAgB;AAC3B,UAAM;AACN,SAAK,OAAO,QAAQ,EAAE;AACtB,QAAI,GAAG,QAAQ;AAAQ,aAAO;AAAA,EAChC;AAEA,SAAO;AAAA,IACL,MAAM;AAAA,IACN,OAAO,EAAE,UAAU,GAAG,SAAS;AAAA,EACjC;AACF,CAAC;",
  "names": ["sanitize", "html", "src_default", "__name", "root", "_a", "config", "defineProperty", "remove", "hasUpdate", "registry", "Context", "location", "toValue", "_a", "mode", "root", "Service", "config", "mode", "Context", "_a", "_a", "_a", "src_default", "Card", "client_default", "Context", "_a"]
}
